!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("canvas"),require("gl")):"function"==typeof define&&define.amd?define(["canvas","gl"],e):"object"==typeof exports?exports.PhotoEditorSDK=e(require("canvas"),require("gl")):t.PhotoEditorSDK=e(t.canvas,t.gl)}(this,function(t,e){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(e.s=106)}([function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=r(169),o=n(i),a=r(168),s=n(a),u=r(32),l=n(u);e["default"]=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,l["default"])(e)));t.prototype=(0,s["default"])(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o["default"]?(0,o["default"])(t,e):t.__proto__=e)}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=r(32),o=n(i);e["default"]=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,o["default"])(e))&&"function"!=typeof e?t:e}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(140),s=n(a),u=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];(0,o["default"])(this,t),this._intensity=e,this._stack=new s["default"](e)}return t.prototype.render=function(t,e){return this._stack.render(t,e)},t.prototype.setIntensity=function(t){this._intensity=t,this._stack.setIntensity(t)},t.prototype.setDirtyForRenderer=function(t,e){this._stack.setDirtyForRenderer(t,e)},t.prototype.dispose=function(){this._stack.dispose()},t}();u.identifier=null,u.isIdentity=!1,u.displayName=null,u.extend=r(72),u.PrimitivesStack=s["default"],e["default"]=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(141);Object.defineProperty(e,"Brightness",{enumerable:!0,get:function(){return n(i)["default"]}});var o=r(142);Object.defineProperty(e,"Contrast",{enumerable:!0,get:function(){return n(o)["default"]}});var a=r(143);Object.defineProperty(e,"Desaturation",{enumerable:!0,get:function(){return n(a)["default"]}});var s=r(144);Object.defineProperty(e,"Glow",{enumerable:!0,get:function(){return n(s)["default"]}});var u=r(145);Object.defineProperty(e,"Gobblin",{enumerable:!0,get:function(){return n(u)["default"]}});var l=r(146);Object.defineProperty(e,"Grayscale",{enumerable:!0,get:function(){return n(l)["default"]}});var f=r(79);Object.defineProperty(e,"LookupTable",{enumerable:!0,get:function(){return n(f)["default"]}});var c=r(147);Object.defineProperty(e,"Saturation",{enumerable:!0,get:function(){return n(c)["default"]}});var d=r(148);Object.defineProperty(e,"SoftColorOverlay",{enumerable:!0,get:function(){return n(d)["default"]}});var p=r(149);Object.defineProperty(e,"ToneCurve",{enumerable:!0,get:function(){return n(p)["default"]}});var h=r(150);Object.defineProperty(e,"X400",{enumerable:!0,get:function(){return n(h)["default"]}})},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Promise=e.Log=e.Constants=e.Color=e.Configurable=e.Utils=e.EventEmitter=e.Engine=e.cancelAnimationFrame=e.requestAnimationFrame=void 0;var o=r(167);Object.defineProperty(e,"requestAnimationFrame",{enumerable:!0,get:function(){return o.requestAnimationFrame}}),Object.defineProperty(e,"cancelAnimationFrame",{enumerable:!0,get:function(){return o.cancelAnimationFrame}});var a=r(62);Object.keys(a).forEach(function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var s=r(7),u=i(s),l=r(38),f=n(l),c=r(21),d=i(c),p=r(22),h=i(p),_=r(31),v=i(_),g=r(12),y=i(g),m=r(24),x=i(m),b=r(8),T=i(b);e.Engine=u["default"],e.EventEmitter=d["default"],e.Utils=h["default"],e.Configurable=v["default"],e.Color=y["default"],e.Constants=f,e.Log=x["default"],e.Promise=T["default"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var i=r(24),o=n(i),a=r(12),s=n(a),u=r(73),l=n(u),f=r(74),c=n(f),d=r(23),p=n(d),h=r(21),_=n(h),v=r(22),g=n(v);e.BATCH_SIZE=2e3,e.VERTEX_SIZE=5,e.VERTEX_BYTE_SIZE=4*e.VERTEX_SIZE,e.Color=s["default"],e.Matrix=l["default"],e.Vector2=p["default"],e.Rectangle=c["default"],e.EventEmitter=_["default"],e.Log=o["default"],e.Utils=g["default"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(97),o=n(i),a=r(99),s=n(a),u=r(42),l=n(u),f=r(43),c=n(f),d=r(41),p=n(d),h=r(66),_=n(h),v=r(46),g=n(v),y=r(69),m=n(y),x=r(102),b=n(x),T=r(30),w=n(T),C=r(29),O=n(C),R=r(101),E=n(R),F=r(100),P=n(F),S=r(44),M=n(S),A=r(96),k=n(A),D=r(71),j=n(D),B={WebGLRenderer:s["default"],CanvasRenderer:o["default"],WebGLFilterManager:c["default"],CanvasFilterManager:l["default"],DisplayObject:p["default"],Container:_["default"],BaseTexture:g["default"],Texture:m["default"],RenderTexture:b["default"],WebGLRenderTarget:w["default"],CanvasRenderTarget:O["default"],Sprite:E["default"],Shaders:P["default"],Shader:M["default"],Filter:k["default"],PixelArrayImage:j["default"],autoDetectRenderer:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return s["default"].isSupported()?new s["default"](t,e,r):new o["default"](t,e,r)}};e["default"]=B},function(t,e,r){(function(n,i){function o(t){return t&&t.__esModule?t:{"default":t}}var a,s=r(32),u=o(s);/*!
	 * Native Promise Only
	 * v0.8.0-a (c) Kyle Simpson
	 * MIT License: http://getify.mit-license.org
	 * @license
	 */
!function(n,i,o){i[n]=i[n]||o(),"undefined"!=typeof t&&t.exports?t.exports=i[n]:(a=function(){return i[n]}.call(e,r,e,t),!(void 0!==a&&(t.exports=a)))}("Promise","undefined"!=typeof n?n:void 0,function(){"use strict";function t(t,e){h.add(t,e),p||(p=v(h.drain))}function e(t){var e,r="undefined"==typeof t?"undefined":(0,u["default"])(t);return null==t||"object"!=r&&"function"!=r||(e=t.then),"function"==typeof e?e:!1}function r(){for(var t=0;t<this.chain.length;t++)n(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function n(t,r,n){var i,o;try{r===!1?n.reject(t.msg):(i=r===!0?t.msg:r.call(void 0,t.msg),i===n.promise?n.reject(TypeError("Promise-chain cycle")):(o=e(i))?o.call(i,n.resolve,n.reject):n.resolve(i))}catch(a){n.reject(a)}}function o(n){var i,s=this;if(!s.triggered){s.triggered=!0,s.def&&(s=s.def);try{(i=e(n))?t(function(){var t=new l(s);try{i.call(n,function(){o.apply(t,arguments)},function(){a.apply(t,arguments)})}catch(e){a.call(t,e)}}):(s.msg=n,s.state=1,s.chain.length>0&&t(r,s))}catch(u){a.call(new l(s),u)}}}function a(e){var n=this;n.triggered||(n.triggered=!0,n.def&&(n=n.def),n.msg=e,n.state=2,n.chain.length>0&&t(r,n))}function s(t,e,r,n){for(var i=0;i<e.length;i++)!function(i){t.resolve(e[i]).then(function(t){r(i,t)},n)}(i)}function l(t){this.def=t,this.triggered=!1}function f(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function c(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var n=new f(this);this.then=function(e,i){var o={success:"function"==typeof e?e:!0,failure:"function"==typeof i?i:!1};return o.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");o.resolve=t,o.reject=e}),n.chain.push(o),0!==n.state&&t(r,n),o.promise},this["catch"]=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){o.call(n,t)},function(t){a.call(n,t)})}catch(i){a.call(n,i)}}var d,p,h,_=Object.prototype.toString,v="undefined"!=typeof i?function(t){return i(t)}:setTimeout;try{Object.defineProperty({},"x",{}),d=function(t,e,r,n){return Object.defineProperty(t,e,{value:r,writable:!0,configurable:n!==!1})}}catch(g){d=function(t,e,r){return t[e]=r,t}}h=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,r,n;return{add:function(i,o){n=new t(i,o),r?r.next=n:e=n,r=n,n=void 0},drain:function(){var t=e;for(e=r=p=void 0;t;)t.fn.call(t.self),t=t.next}}}();var y=d({},"constructor",c,!1);return c.prototype=y,d(y,"__NPO__",0,!1),d(c,"resolve",function(t){var e=this;return t&&"object"==("undefined"==typeof t?"undefined":(0,u["default"])(t))&&1===t.__NPO__?t:new e(function(e,r){if("function"!=typeof e||"function"!=typeof r)throw TypeError("Not a function");e(t)})}),d(c,"reject",function(t){return new this(function(e,r){if("function"!=typeof e||"function"!=typeof r)throw TypeError("Not a function");r(t)})}),d(c,"all",function(t){var e=this;return"[object Array]"!=_.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");var i=t.length,o=Array(i),a=0;s(e,t,function(t,e){o[t]=e,++a===i&&r(o)},n)})}),d(c,"race",function(t){var e=this;return"[object Array]"!=_.call(t)?e.reject(TypeError("Not an array")):new e(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");s(e,t,function(t,e){r(e)},n)})}),c})}).call(e,function(){return this}(),r(61).setImmediate)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(8),c=n(f),d=r(24),p=n(d),h=r(7),_=n(h),v=r(31),g=n(v),y=r(75),m=n(y),x=r(72),b=n(x),T=function(t){function e(r){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];(0,o["default"])(this,e);var i=(0,s["default"])(this,t.call(this,n,{enabled:{type:"boolean","default":!0}}));return i._sdk=r,i._dirtiness={},i._sprite=new _["default"].Sprite,i._container=new _["default"].Container,i._container.addChild(i._sprite),i}return(0,l["default"])(e,t),e.prototype._onOptionsChange=function(){this.setDirty(!0)},e.prototype._getRenderTexture=function(t){return this._renderTexture||(this._renderTexture=t.createRenderTexture()),this._renderTexture},e.prototype.render=function(t){var e=this;if(!this.getEnabled())return c["default"].resolve();var r=t.getRenderer(),n=void 0,i=void 0;return p["default"].canLog("info")&&(i=new m["default"](this.constructor.name,"Rendering")),this.isDirtyForRenderer(r)?n=this._render(t).then(function(){e.setDirtyForRenderer(!1,r)}):(p["default"].info(this.constructor.name,"Rendering from cache"),n=this.renderCached(t)),n.then(function(){i&&i.stop()})},e.prototype.renderCached=function(t){var e=t.getSprite();return e.setTexture(this._getRenderTexture(t)),c["default"].resolve()},e.prototype._render=function(t){var e=void 0;return(e=t.getRenderer()instanceof _["default"].WebGLRenderer?this._renderWebGL.bind(this):this._renderCanvas.bind(this))(t)},e.prototype._renderWebGL=function(t){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")},e.prototype._renderCanvas=function(t){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")},e.prototype.getNewDimensions=function(t){return t.clone()},e.prototype.reset=function(){this._dirty=!0,this._glslPrograms={}},e.prototype.isDirtyForRenderer=function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]},e.prototype.setDirtyForRenderer=function(t,e){this._dirtiness[e.id]=t},e.prototype.setDirty=function(t){for(var e in this._dirtiness)this.setDirtyForRenderer(t,{id:e})},e.prototype.disposeRenderTexture=function(){this._renderTexture=null},e.prototype.dispose=function(){},e}(g["default"]);T.identifier=null,T.extend=b["default"],e["default"]=T},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(31),c=n(f),d=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,l["default"])(e,t),e.prototype.update=function(){},e.prototype.render=function(t,e,r,n){"webgl"===t.identifier?this.renderWebGL(t,e,r,n):this.renderCanvas(t)},e.prototype.renderWebGL=function(t,e,r,n){throw new Error("Primitive#renderWebGL is abstract and not implemented in inherited class.")},e.prototype.renderCanvas=function(t){throw new Error("Primitive#renderCanvas is abstract and not implemented in inherited class.")},e.prototype.getFilter=function(){return this._filter},e.prototype.dispose=function(){this._filter&&(this._filter.dispose(),this._filter=null)},e}(c["default"]);e["default"]=d},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(82),s=n(a),u=function(){function t(e,r,n){var i=arguments.length<=3||void 0===arguments[3]?1:arguments[3];(0,o["default"])(this,t),this.r=e,this.g=r,this.b=n,this.a=i}return t.prototype.toRGBA=function(){var t=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a];return"rgba("+t.join(",")+")"},t.prototype.toHex=function(){var t=[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))];return"#"+t.join("")},t.prototype.toGLColor=function(){return[this.r,this.g,this.b,this.a]},t.prototype.toRGBGLColor=function(){return[this.r,this.g,this.b]},t.prototype.toHSV=function(){var t=Math.max(this.r,this.g,this.b),e=Math.min(this.r,this.g,this.b),r=void 0,n=void 0,i=t,o=t-e;if(n=0===t?0:o/t,t===e)r=0;else{switch(t){case this.r:r=(this.g-this.b)/o,this.g<this.b&&(r+=6);break;case this.g:r=(this.b-this.r)/o+2;break;case this.b:r=(this.r-this.g)/o+4}r/=6}return[r,n,i]},t.fromHSV=function(e,r,n){var i=arguments.length<=3||void 0===arguments[3]?1:arguments[3],o=[],a=o[0],s=o[1],u=o[2],l=Math.floor(6*e),f=6*e-l,c=n*(1-r),d=n*(1-f*r),p=n*(1-(1-f)*r);switch(l%6){case 0:a=n,s=p,u=c;break;case 1:a=d,s=n,u=c;break;case 2:a=c,s=n,u=p;break;case 3:a=c,s=d,u=n;break;case 4:a=p,s=c,u=n;break;case 5:a=n,s=c,u=d}var h=new t;return h.r=a,h.g=s,h.b=u,h.a=i,h},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.equals=function(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a},t.prototype._componentToHex=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},t.prototype.toString=function(){return"Color("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},(0,s["default"])(t,null,[{key:"TRANSPARENT",get:function(){return new t(0,0,0,0)}},{key:"WHITE",get:function(){return new t(1,1,1,1)}},{key:"BLACK",get:function(){return new t(0,0,0,1)}}]),t}();e["default"]=u},function(t,e,r){t.exports=!r(33)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(25),i=r(86),o=r(58),a=Object.defineProperty;e.f=r(13)?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return a(t,e,r)}catch(s){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(183),i=r(48);t.exports=function(t){return n(i(t))}},function(e,r){e.exports=t},function(t,e){var r=t.exports={version:"2.3.0"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(15),i=r(35);t.exports=r(13)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(56)("wks"),i=r(36),o=r(11).Symbol,a="function"==typeof o,s=t.exports=function(t){return n[t]||(n[t]=a&&o[t]||(a?o:i)("Symbol."+t))};s.store=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(24),s=n(a),u=12,l=function(){function t(){(0,o["default"])(this,t),this._maxListeners=u,this._events={},this._pipeDestinations=[]}return t.prototype.pipeEvents=function(t){this._pipeDestinations.push(t)},t.prototype.unpipeEvents=function(t){var e=this._pipeDestinations.indexOf(t);-1!==e&&this._pipeDestinations.splice(e,1)},t.prototype.on=function(t,e){if("function"!=typeof e)throw new TypeError;var r=this._events[t]||(this._events[t]=[]);return-1!==r.indexOf(e)?this:(r.push(e),r.length>this._maxListeners&&(s["default"].warn("EventEmitter","Possible memory leak detected, added "+r.length+" `"+t+"` listeners (current limit is "+this._maxListeners+")"),console.trace()),this)},t.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(null,arguments)}var n=this;return this.on(t,r)},t.prototype.off=function(t){if(arguments.length-1===0)return this._events[t]=null,this;var e=arguments.length<=1?void 0:arguments[1];if("function"!=typeof e)throw new TypeError;var r=this._events[t];if(!r||!r.length)return this;var n=r.indexOf(e);return-1===n?this:(r.splice(n,1),this)},t.prototype.emit=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;e>n;n++)r[n-1]=arguments[n];this._pipeDestinations.forEach(function(e){e.emit.apply(e,[t].concat(r))});var i=this._events[t];return i&&i.length?(i.forEach(function(t){return t.apply(null,r)}),!0):!1},t.prototype.setMaxListeners=function(t){if(parseInt(t,10)!==t)throw new TypeError;this._maxListeners=t},t}();e["default"]=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(32),o=n(i),a=r(0),s=n(a),u=r(39),l=n(u),f=function(){function t(){(0,s["default"])(this,t)}return t.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.values=function e(t){var e=[];for(var r in t)e.push(t[r]);return e},t.isDOMElement=function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":(0,o["default"])(HTMLElement))?t instanceof HTMLElement:t&&"object"===("undefined"==typeof t?"undefined":(0,o["default"])(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName},t.isTouchEvent=function(t){return-1!==t.type.indexOf("touch")},t.resizeVectorToFit=function(t,e){var r=Math.min(e.x/t.x,e.y/t.y),n=t.clone().multiply(r);return n},t.defaults=function(t){var e={};for(var r in t)e[r]=t[r];for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;n>o;o++)i[o-1]=arguments[o];for(var a=0;a<i.length;a++){var s=i[a];for(var u in s)"undefined"==typeof e[u]&&(e[u]=s[u])}return e},t.extend=function(t){var e={};for(var r in t)e[r]=t[r];for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;n>o;o++)i[o-1]=arguments[o];for(var a=0;a<i.length;a++){var s=i[a];for(var u in s)e[u]=s[u]}return e},t.clone=function(t){return this.extend({},t)},t.createBlobURIFromDataURI=function(t){if(!(window.Blob&&window.URL&&ArrayBuffer&&Uint8Array))return t;for(var e=l["default"].decode(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),i=new Uint8Array(n),o=0;o<e.length;o++)i[o]=e[o];var a=new window.Blob([n],{type:r});return window.URL.createObjectURL(a)},t.requestAnimationFrame=function(t){var e=function(t){setTimeout(t,1e3/60)};return"undefined"==typeof window?e(t):(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||e)(t)},t.getUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,r="x"===t?e:3&e|8;return r.toString(16)})},t.flatten=function(e){return e.reduce(function(e,r){return e.concat(Array.isArray(r)?t.flatten(r):r)},[])},t.createCanvas=function(){if("undefined"==typeof window){var t=r(17);return new t}return document.createElement("canvas")},t.isPowerOfTwo=function(t){return 0===(t.x&t.x-1)&&0===(t.y&t.y-1)},t.nextLowestPOT=function(t){for(var e=1;32>e;e<<=1)t|=t>>e;return t-(t>>1)},t.nextHighestPOT=function(t){t--;for(var e=1;32>e;e<<=1)t|=t>>e;return t+1},t.moveArrayItem=function(t,e,r){if(r>=t.length)for(var n=r-t.length;n--+1;)t.push(void 0);t.splice(r,0,t.splice(e,1)[0])},t}();e["default"]=f},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=function(){function t(e,r){(0,o["default"])(this,t),this.x=e,this.y=r,"undefined"==typeof this.x&&(this.x=0),"undefined"==typeof this.y&&(this.y=0)}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clamp=function(e,r){var n=null!==e&&"undefined"!=typeof e,i=null!==r&&"undefined"!=typeof r;return e instanceof t||!n||(e=new t(e,e)),r instanceof t||!i||(r=new t(r,r)),n&&(this.x=Math.max(e.x,this.x),this.y=Math.max(e.y,this.y)),i&&(this.x=Math.min(r.x,this.x),this.y=Math.min(r.y,this.y)),this},t.prototype.divide=function(e,r){return e instanceof t?(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/="undefined"==typeof r?e:r),this},t.prototype.subtract=function(e,r){return e instanceof t?(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-="undefined"==typeof r?e:r),this},t.prototype.multiply=function(e,r){return e instanceof t?(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*="undefined"==typeof r?e:r),this},t.prototype.add=function(e,r){return e instanceof t?(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+="undefined"==typeof r?e:r),this},t.prototype.equals=function(e,r){return e instanceof t?e.x===this.x&&e.y===this.y:e===this.x&&r===this.y},t.prototype.flip=function(){var t=this.x;return this.x=this.y,this.y=t,this},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},t.prototype.floor=function(){return this.x=0|this.x,this.y=0|this.y,this},t.prototype.abs=function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.toString=function(){return"Vector2({ x: "+this.x+", y: "+this.y+" })"},t}();e["default"]=a},function(t,e,r){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="warn",n=[{type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{type:"info",background:"#BDE5F8",color:"#00529B"},{type:"warn",background:"#FEEFB3",color:"#9F6000"},{type:"error",background:"#FFBABA",color:"#D8000C"},{type:"log",background:"#EEEEEE",color:"#1f4f6b"}],i=n.map(function(t){return t.type}),o={};o.setLevel=function(t){r=t},o.canLog=function(t){if(null===r)return!1;var e=i.indexOf(t),n=i.indexOf(r);return!(n>e)},o.hasColorfulOutput=function(){return(!t||t&&t.browser)&&"undefined"!=typeof navigator&&navigator.userAgent.match(/Gecko|WebKit/i)&&!navigator.userAgent.match(/Trident/)},o.printError=function(t){var e=t.stack.split("\n");e.forEach(function(t){o.error("Error",t)})},n.forEach(function(t){var e=t.type,r=t.background,n=t.color;o[e]=function(t){if(o.canLog(e)){for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;i>s;s++)a[s-1]=arguments[s];var u=a.map(function(t){return"string"==typeof t?t:t.toString()}).join(" ");return o.hasColorfulOutput()?void console.log("%c  %c PhotoEditorSDK %c  %c "+t+" %c  "+u+"  %c  ","background: #43ADEB; padding: 5px 0","background: #2B2B2B; color: white; padding: 5px 0","background: #43ADEB; padding: 5px 0","background: "+r+"; color: "+n+"; padding: 5px 0; font-weight: bold","background: #2B2B2B; color: white; padding: 5px 0","background: #43ADEB; padding: 5px 0"):console.log("PhotoEditorSDK | "+t+" | "+u)}}}),e["default"]=o}).call(e,r(37))},function(t,e,r){var n=r(27);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){var n=r(11),i=r(18),o=r(84),a=r(19),s="prototype",u=function(t,e,r){var l,f,c,d=t&u.F,p=t&u.G,h=t&u.S,_=t&u.P,v=t&u.B,g=t&u.W,y=p?i:i[e]||(i[e]={}),m=y[s],x=p?n:h?n[e]:(n[e]||{})[s];p&&(r=e);for(l in r)f=!d&&x&&void 0!==x[l],f&&l in y||(c=f?x[l]:r[l],y[l]=p&&"function"!=typeof x[l]?r[l]:v&&f?o(c,n):g&&x[l]==c?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e[s]=t[s],e}(c):_&&"function"==typeof c?o(Function.call,c):c,_&&((y.virtual||(y.virtual={}))[l]=c,t&u.R&&m&&!m[l]&&a(m,l,c)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,r){t.exports=e},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s=function(){function t(e,r,n,i,a){(0,o["default"])(this,t),this._width=e,this._height=r,this._pixelRatio=n,this._canvas=i||this._createCanvas(),this._context=a||this._canvas.getContext("2d"),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filter:[]}]}return t.prototype._createCanvas=function(){return a.Utils.createCanvas()},t.prototype.clear=function(){var t=this._context;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)},t.prototype.resizeTo=function(t){this._width!==t.x&&(this._width=t.x,this._canvas.width=this._width*this._pixelRatio),this._height!==t.y&&(this._height=t.y,this._canvas.height=this._height*this._pixelRatio)},t.prototype.getCanvas=function(){return this._canvas},t.prototype.getContext=function(){return this._context},t.prototype.getFilterStack=function(){return this._filterStack},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.getPixelRatio=function(){return this._pixelRatio},t.prototype.setPixelRatio=function(t){this._pixelRatio=t},t.prototype.getDimensions=function(){return new a.Vector2(this._width,this._height)},t.prototype.dispose=function(){this._canvas=null,this._context=null},t}();e["default"]=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s=function(){function t(e,r,n,i){var s=arguments.length<=4||void 0===arguments[4]?!1:arguments[4];(0,o["default"])(this,t),this._renderer=e,this._gl=e.getContext(),this._width=r,this._height=n,this._frame=null,this._pixelRatio=i,this._projectionMatrix=new a.Matrix,this._framebuffer=null,this._isRoot=s,this._filterStack=[{renderTarget:this,filter:[]}],s||this._initFrameBuffer()}return t.prototype.resizeTo=function(t){this._width=0|t.x,this._height=0|t.y,this._isRoot||this._resizeTexture(t),this._calculateProjectionMatrix()},t.prototype._resizeTexture=function(t){var e=this._gl;e.bindTexture(e.TEXTURE_2D,this._texture);var r=this._width*this._pixelRatio,n=this._height*this._pixelRatio;e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r,n,0,e.RGBA,e.UNSIGNED_BYTE,null)},t.prototype.activate=function(){var t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),t.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),t.disable(t.STENCIL_TEST)},t.prototype.clear=function(){var t=arguments.length<=0||void 0===arguments[0]?a.Color.TRANSPARENT:arguments[0],e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.clearColor.apply(e,t.toGLColor()),e.clear(e.COLOR_BUFFER_BIT)},t.prototype._calculateProjectionMatrix=function(){var t=this._projectionMatrix;t.reset();var e=this._frame||new a.Rectangle(0,0,this._width,this._height),r=e.x,n=e.y;this._isRoot?(t.a=1/this._width*2,t.d=-1/this._height*2,t.tx=-1-r*t.a,t.ty=1-n*t.d):(t.a=1/this._width*2,t.d=1/this._height*2,t.tx=-1-r*t.a,t.ty=-1-n*t.d)},t.prototype._initFrameBuffer=function(){var t=this._gl;this._framebuffer=t.createFramebuffer(),this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0),this.resizeTo(new a.Vector2(this._width,this._height))},t.prototype.getProjectionMatrix=function(){return this._projectionMatrix},t.prototype.getTexture=function(){return this._texture},t.prototype.getFrame=function(){return this._frame},t.prototype.setFrame=function(t){this._frame=t},t.prototype.getFilterStack=function(){return this._filterStack},t.prototype.dispose=function(){var t=this._gl;t.deleteTexture(this._texture),t.deleteFramebuffer(this._framebuffer)},t}();e["default"]=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(172),o=n(i),a=r(0),s=n(a),u=r(2),l=n(u),f=r(1),c=n(f),d=r(8),p=n(d),h=r(24),_=n(h),v=r(21),g=n(v),y=r(23),m=n(y),x=r(12),b=n(x),T=r(22),w=n(T),C=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];(0,s["default"])(this,e);var i=(0,l["default"])(this,t.call(this));return i.availableOptions=i.availableOptions||{},i.availableOptions=w["default"].extend(i.availableOptions,n),i._onConfigurableUpdate=i._onConfigurableUpdate.bind(i),i._initOptions(r),i}return(0,c["default"])(e,t),e.prototype._buildConfigError=function(t){var e="";return this.constructor.name&&(e=this.constructor.name+": "),e+=t,new Error(e)},e.prototype._onOptionsChange=function(){},e.prototype.validateSettings=function(){var t=this;return new p["default"](function(e,r){for(var n in t.availableOptions){var i=t.availableOptions[n];if(i.required&&"undefined"==typeof t._options[n])return r(t._buildConfigError("Option `"+n+"` is required."))}e()})},e.prototype._initOptions=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this._options={};var r,n,i,o=this;for(r in this.availableOptions){if(i=r.charAt(0).toUpperCase()+r.slice(1),n=this.availableOptions[r],-1===["string","number","boolean","object","vector2","color","configurable","array"].indexOf(n.type))throw this._buildConfigError("Unknown option type: `"+n.type+"`");var a=function(t,e){o["set"+i]=function(e,r,n){o.setOption(t,e,r,n)},o["get"+i]=function(){return o.getOption(t)}};a(r,n),"configurable"===n.type&&(this._options[r]=new e(void 0,n.structure||{}),this._options[r].on("update",this._onConfigurableUpdate)),"undefined"==typeof n["default"]||r in t||this["set"+i](n["default"],!1,!0)}for(r in t){if("undefined"==typeof this.availableOptions[r])throw new Error("Invalid option: "+r);i=r.charAt(0).toUpperCase()+r.slice(1),this["set"+i](t[r],!1,!0)}},e.prototype.set=function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];e&&this.emit("update",this,t);for(var r in t)this.setOption(r,t[r],!1);this._onOptionsChange()},e.prototype.getOption=function(t){return this._options[t]},e.prototype.getOptionDefault=function(t){var e=this.availableOptions[t];if(e)return e["default"]},e.prototype.getOptions=function(){return this._options},e.prototype.getDefaultOptions=function(){var t={};for(var e in this._options){var r=this.availableOptions[e]["default"];"undefined"!=typeof r&&(t[e]=r)}return t},e.prototype.optionsEqual=function(t){for(var e in t){var r=t[e];if(!this._optionEquals(e,r))return!1}return!0},e.prototype._optionEquals=function(t,e){var r=this.availableOptions[t].type,n=this._options[t];switch(r){case"string":case"number":case"boolean":case"object":case"*":return n===e;case"vector2":case"color":return e.equals(n);case"configurable":return n.optionsEqual(e);case"array":return this._arrayOptionEquals(t,e)}},e.prototype._arrayOptionEquals=function(t,r){for(var n=this._options[t],i=!0,o=0;o<n.length;o++){var a=n[o],s=r[o];if(a instanceof e){if("undefined"==typeof s||!a.optionsEqual(s)){i=!1;break}}else if(s!==a){i=!1;break}}return i},e.prototype.serializeOptions=function(){var t={};for(var e in this._options)t[e]=this._serializeOption(e);return t},e.prototype._serializeOption=function(t){var e=this.availableOptions[t].type,r=this._options[t];switch(e){case"string":case"number":case"boolean":case"object":case"*":return r;case"vector2":case"color":return r.clone();case"configurable":return r.serializeOptions();case"array":return r.slice(0)}},e.prototype.setOption=function(t,e){var r=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];r&&this.emit("update",this,(0,o["default"])({},t,e));var i=this.availableOptions[t];if(!i)return void _["default"].error(this.constructor.name,"Unknown option `"+t+"`.");switch("undefined"!=typeof i.setter&&(e=i.setter.call(this,e,n)),"undefined"!=typeof i.validation&&i.validation(e),i.type){case"string":if("string"!=typeof e)throw this._buildConfigError("Option `"+t+"` has to be a string.");var a=i.available;if("undefined"!=typeof a&&-1===a.indexOf(e))throw this._buildConfigError("Invalid value for `"+t+"` (valid values are: "+i.available.join(", ")+")");this._options[t]=e;break;case"number":if("number"!=typeof e)throw this._buildConfigError("Option `"+t+"` has to be a number.");this._options[t]=e;break;case"boolean":if("boolean"!=typeof e)throw this._buildConfigError("Option `"+t+"` has to be a boolean.");this._options[t]=e;break;case"vector2":if(!(e instanceof m["default"]))throw this._buildConfigError("Option `"+t+"` has to be an instance of Vector2.");this._options[t]=e.clone();break;case"color":if(!(e instanceof b["default"]))throw this._buildConfigError("Option `"+t+"` has to be an instance of Color.");this._options[t]=e;break;case"object":case"*":this._options[t]=e;break;case"configurable":this._options[t].set(e);break;case"array":if(!(e instanceof Array))throw this._buildConfigError("Option `"+t+"` has to be an Array.");this._options[t]=e.slice(0);break;default:throw this._buildConfigError("Unknown option type: `"+i.type+"`")}r&&(this._onOptionsChange(),this.emit("update",this,(0,o["default"])({},t,e)))},e.prototype._onConfigurableUpdate=function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];this.emit.apply(this,["update"].concat(e))},e}(g["default"]);e["default"]=C},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=r(171),o=n(i),a=r(170),s=n(a),u="function"==typeof s["default"]&&"symbol"==typeof o["default"]?function(t){return typeof t}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]?"symbol":typeof t};e["default"]="function"==typeof s["default"]&&"symbol"===u(o["default"])?function(t){return"undefined"==typeof t?"undefined":u(t)}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]?"symbol":"undefined"==typeof t?"undefined":u(t)}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,r){var n=r(91),i=r(49);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e){function r(){l=!1,a.length?u=a.concat(u):f=-1,u.length&&n()}function n(){if(!l){var t=setTimeout(r);l=!0;for(var e=u.length;e;){for(a=u,u=[];++f<e;)a&&a[f].run();f=-1,e=u.length}a=null,l=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var a,s=t.exports={},u=[],l=!1,f=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new i(t,e)),1!==u.length||l||setTimeout(n,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=o,s.addListener=o,s.once=o,s.off=o,s.removeListener=o,s.removeAllListeners=o,s.emit=o,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.RenderType={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},e.ImageFormat={PNG:"image/png",JPEG:"image/jpeg"},e.Events={OPERATION_UPDATED:"operation:update"}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});/*!
	 * Extracted from MinifyJpeg (Copyright (c) 2014 Hiroaki Matoba, MIT License):
	 * https://github.com/hMatoba/MinifyJpeg
	 */
var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n={encode:function(t){var e="",n=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=void 0,f=0;do n=t[f++],i=t[f++],o=t[f++],a=n>>2,s=(3&n)<<4|i>>4,u=(15&i)<<2|o>>6,l=63&o,isNaN(i)?u=l=64:isNaN(o)&&(l=64),e=e+r.charAt(a)+r.charAt(s)+r.charAt(u)+r.charAt(l),n=i=o="",a=s=u=l="";while(f<t.length);return e},decode:function(t){var e=void 0,n=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,l=0,f=[],c=/[^A-Za-z0-9\+\/\=]/g;if(c.exec(t))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do o=r.indexOf(t.charAt(l++)),a=r.indexOf(t.charAt(l++)),s=r.indexOf(t.charAt(l++)),u=r.indexOf(t.charAt(l++)),e=o<<2|a>>4,n=(15&a)<<4|s>>2,i=(3&s)<<6|u,f.push(e),64!==s&&f.push(n),64!==u&&f.push(i),e=n=i="",o=a=s=u="";while(l<t.length);return f}};e["default"]=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(39),s=n(a),u=r(107),l=n(u),f={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},c="data:image/jpeg;base64,",d=new RegExp("^"+c,"i"),p=function(){function t(e){(0,o["default"])(this,t),this._buf=e,this._stream=new l["default"](this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifBuffer=this._getExifBuffer(),this._exifStream=new l["default"](this._exifBuffer),this._parseExif()}return t.prototype.restoreExifTags=function(t){var e=t.replace(c,""),r=s["default"].decode(e),n=this._sliceIntoSegments(r),i=n[1][0],o=r.slice(0,i),a=r.slice(i),u=o.concat(this._exifBuffer);return u=u.concat(a),c+s["default"].encode(u)},t.prototype.setOrientation=function(t){if(this._tagData.Orientation){var e=this._tagData.Orientation.entryOffset;this._exifStream.setHead(e+8),this._exifStream.writeInt16(t)}},t.isJPEG=function(t){return d.test(t)},t.fromBase64String=function(e){var r=e.replace(c,""),n=s["default"].decode(r);return new t(n)},t.prototype._parseExif=function(){this._exifStream.setHead(0),this._exifStream.readInt16(),this._exifStream.readInt16();var t=this._exifStream.readString(4);if("Exif"===t){this._exifStream.readInt16();var e=this._exifStream.getHead(),r=!1,n=this._exifStream.readInt16();if(18761===n)r=!1;else{if(19789!==n)throw new Error("Invalid TIFF data: No endian type found");r=!0}if(42!==this._exifStream.readInt16(!r))throw new Error("Invalid TIFF data: No 0x002A");var i=this._exifStream.readInt32(!r);if(8>i)throw new Error("Invalid TIFF data: First IFD offset < 8");var o=e+i,a=this._readTags(this._exifStream,e,o,r);this._tags=a.tags,this._tagData=a.tagData}},t.prototype._readTags=function(t,e,r,n){t.setHead(r);for(var i=t.readInt16(!n),o={},a=[],s=0;i>s;s++){var u=r+12*s+2;t.setHead(u);var l=t.readInt16(!n),c=void 0,d=void 0,p=void 0;if(f[l]){l=f[l],c=t.readInt16(!n),d=t.readInt32(!n),p=t.readInt32(!n)+e;var h=null;switch(c){case 1:case 7:if(1===d)h=t.readInt8(!n);else{h=[];for(var _=0;d>_;_++)h.push(t.readInt8(!n))}break;case 2:t.setHead(d>4?p:u+8),h=t.readString(d);break;case 3:if(t.setHead(d>2?p:u+8),1===d)h=t.readInt16(!n);else{h=[];for(var v=0;d>v;v++)h.push(t.readInt16(!n))}break;case 4:case 9:if(t.setHead(d>1?p:u+8),1===d)h=t.readInt32(!n);else{h=[];for(var g=0;d>g;g++)h.push(t.readInt32(!n))}break;case 5:case 10:if(t.setHead(p),1===d){var y=t.readInt32(!n),m=t.readInt32(!n);h=y/m}else{h=[];for(var x=0;d>x;x++){var b=t.readInt32(!n),T=t.readInt32(!n),w=b/T;h.push(w)}}}o[l]=h,a[l]={value:h,numValues:d,entryOffset:u,valueOffset:p,type:c}}}return{tags:o,tagData:a}},t.prototype._getExifBuffer=function(){for(var t=this._segments,e=0;e<t.length;e++){var r=t[e][0],n=t[e][1];this._stream.setHead(r);var i=this._stream.peekInt16();if(65505===i)return this._buf.slice(r,n)}return!1},t.prototype._sliceIntoSegments=function(t){for(var e=new l["default"](t),r=[];e.getHead()<t.length;){var n=e.readInt16();if(65496!==n){if(65498===n)break;if(!(n>=65280&&65535>=n))throw new Error("Invalid marker: 0x"+n.toString(16));var i=e.readInt16(),o=e.getHead()+i-2;r.push([e.getHead()-4,o]),e.setHead(o)}}return this._stream.setHead(0),r},t.prototype.getTags=function(){return this._tags},t.prototype.getTagData=function(){return this._tagData},t.prototype.dispose=function(){this._buf=[],this._exifBuffer=[],this._segments=[]},t}();e["default"]=p},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s=function(){function t(){(0,o["default"])(this,t),this._position=new a.Vector2(0,0),this._scale=new a.Vector2(1,1),this._pivot=new a.Vector2(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new a.Matrix,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new a.Rectangle(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new a.Rectangle(0,0,1,1),this._tint=16777215}return t.prototype.renderWebGL=function(t){a.Log.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")},t.prototype.renderCanvas=function(t){a.Log.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")},t.prototype.updateTransform=function(){var t=this._parent?this._parent.getWorldTransform():a.Matrix.IDENTITY,e=this._worldTransform,r=this._rotation!==this._lastRotation;r&&(this._sinRotation=Math.sin(this._rotation),this._cosRotation=Math.cos(this._rotation),this._lastRotation=this._rotation),e.a=this._cosRotation*this._scale.x,e.b=this._sinRotation*this._scale.x,e.c=-this._sinRotation*this._scale.y,e.d=this._cosRotation*this._scale.y,e.tx=this._position.x,e.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(e.tx-=this._pivot.x*e.a+this._pivot.y*e.c,e.ty-=this._pivot.x*e.b+this._pivot.y*e.d),e.multiply(t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.addShader=function(t){this._shaders.push(t)},t.prototype.removeShader=function(t){var e=this._shaders.indexOf(t);return-1!==e?(this._shaders.splice(e,1),!0):!1},t.prototype.removeShaderAt=function(t){return this._shaders[t]?(this._shaders.splice(t,1),!0):!1},t.prototype.getBounds=function(){return this._bounds.clone()},t.prototype.getPosition=function(){return this._position},t.prototype.setPosition=function(t,e){t instanceof a.Vector2?this._position.copy(t):this._position.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getScale=function(){return this._scale},t.prototype.setScale=function(t,e){t instanceof a.Vector2?this._scale.copy(t):this._scale.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getPivot=function(){return this._pivot},t.prototype.setPivot=function(t,e){t instanceof a.Vector2?this._pivot.copy(t):this._pivot.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getRotation=function(){return this._rotation},t.prototype.setRotation=function(t){this._rotation=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},t.prototype.getAlpha=function(){return this._alpha},t.prototype.setAlpha=function(t){this._alpha=t},t.prototype.getWorldAlpha=function(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha},t.prototype.getWorldTransform=function(){return this._worldTransform},t.prototype.getParent=function(){return this._parent},t.prototype.setParent=function(t){this._parent=t},t.prototype.getTint=function(){return this._tint},t.prototype.setTint=function(t){this._tint=t},t.prototype.isVisible=function(){return this._visible},t.prototype.setVisible=function(t){this._visible=t},t}();e["default"]=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s=r(29),u=n(s),l=function(){function t(e){(0,o["default"])(this,t),this._renderer=e,this._filterStack=[{renderTarget:e.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new a.Rectangle(0,0,e.getWidth(),e.getHeight())}return t.prototype.resizeTo=function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._textures.forEach(function(e){return e.resizeTo(t)})},t.prototype.pushFilters=function(t,e){var r=t.getBounds();this._currentFrame=r;var n=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(n),this._filterStack.push({renderTarget:n,filters:e})},t.prototype.popFilters=function(){var t=this._filterStack.pop(),e=t.filters,r=t.renderTarget,n=this._filterStack[this._filterStack.length-1],i=r,o=n.renderTarget;return 1===e.length?(e[0].apply(this._renderer,i,o),this._textures.push(i)):this._applyFilters(e,i,o),e},t.prototype._applyFilters=function(t,e,r){var n=this,i=e,o=this._getOrCreateRenderTarget(!0),a=t[t.length-1];t.forEach(function(t,e){var s=t===a;if(s)t.apply(n._renderer,i,r);else{t.apply(n._renderer,i,o);var u=i;i=o,o=u}}),this._textures.push(i),this._textures.push(o)},t.prototype._getOrCreateRenderTarget=function(t){var e=this._textures.pop();return e||(e=new u["default"](this._textureFrame.width,this._textureFrame.height,this._renderer.getPixelRatio())),t&&e.clear(),e},t.prototype.setFilterStack=function(t){this._filterStack=t},t.prototype.dispose=function(){},t}();e["default"]=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s=r(30),u=n(s),l=r(103),f=n(l),c=function(){function t(e){(0,o["default"])(this,t),this._renderer=e,this._filterStack=[{renderTarget:e.getCurrentRenderTarget(),filters:[]}],this._currentFrame=null,this._textures=[],this._textureFrame=new a.Rectangle(0,0,e.getWidth(),e.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}return t.prototype.resizeTo=function(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._textures.forEach(function(e){return e.resizeTo(t)})},t.prototype.setFilterStack=function(t){this._filterStack=t},t.prototype._getOrCreateRenderTarget=function(t){var e=this._textures.pop();return e||(e=new u["default"](this._renderer,this._textureFrame.width,this._textureFrame.height,this._renderer.getPixelRatio())),e.setFrame(this._currentFrame),t&&e.clear(),e},t.prototype.pushFilters=function(t,e){var r=t.getBounds();this._currentFrame=r;var n=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(n),n.clear(),this._filterStack.push({renderTarget:n,filters:e})},t.prototype.popFilters=function(){var t=this._filterStack.pop(),e=t.filters,r=t.renderTarget,n=this._filterStack[this._filterStack.length-1],i=r,o=n.renderTarget;this._quad.map(this._textureFrame,i.getFrame());var a=e[0].getShaderForRenderer(this._renderer),s=this._quad.getVertexBuffer(),u=this._quad.getIndexBuffer(),l=this._renderer.getContext();l.bindBuffer(l.ARRAY_BUFFER,s),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,u);var f=a.getAttributeLocations();return l.vertexAttribPointer(f.a_position,2,l.FLOAT,!1,0,0),l.vertexAttribPointer(f.a_texCoord,2,l.FLOAT,!1,0,32),l.vertexAttribPointer(f.a_color,4,l.FLOAT,!1,0,64),1===e.length?(e[0].apply(this._renderer,i,o),this._textures.push(i)):this._applyFilters(e,i,o),e},t.prototype._applyFilters=function(t,e,r){var n=this,i=e,o=this._getOrCreateRenderTarget(!0),a=t[t.length-1];t.forEach(function(t,e){var s=t===a;if(s)t.apply(n._renderer,i,r);else{t.apply(n._renderer,i,o);var u=i;i=o,o=u}}),this._textures.push(i),this._textures.push(o)},t.prototype._onContextChange=function(){this._textures.length=0,this._renderer.isOfType("webgl")&&(this._quad=new f["default"](this._renderer))},t.prototype.dispose=function(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose()},t}();e["default"]=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s=n(a),u=s["default"].Log,l=function(){function t(e,r,n,i,a){(0,o["default"])(this,t),this._renderer=e,this._vertexSource=r,this._fragmentSource=n,this._uniforms=i||{},this._uniformLocations={},this._attributes=a||[],this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}return t.prototype._init=function(){this._compile();var t=this._renderer.getContext();t.useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()},t.prototype._onContextChange=function(){this._init()},t.prototype.setupBuffers=function(t,e){var r=this._renderer.getContext();r.bindBuffer(r.ARRAY_BUFFER,t),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e),r.vertexAttribPointer(this._attributeLocations.a_position,2,r.FLOAT,!1,s["default"].VERTEX_BYTE_SIZE,0),r.vertexAttribPointer(this._attributeLocations.a_texCoord,2,r.FLOAT,!1,s["default"].VERTEX_BYTE_SIZE,8),r.vertexAttribPointer(this._attributeLocations.a_color,4,r.UNSIGNED_BYTE,!0,s["default"].VERTEX_BYTE_SIZE,16)},t.prototype.syncUniforms=function(){var t=this;Object.keys(this._uniforms).forEach(function(e){t.syncUniform(e)})},t.prototype.syncUniform=function(t){var e=this._renderer.getContext(),r=this._uniforms[t],n=this._uniformLocations[t];switch(r.type){case"sampler2d":case"i":case"1i":e.uniform1i(n,r.value);break;case"f":case"1f":e.uniform1f(n,r.value);break;case"2f":e.uniform2f(n,r.value[0],r.value[1]);break;case"3f":e.uniform3f(n,r.value[0],r.value[1],r.value[2]);break;case"4f":e.uniform4f(n,r.value[0],r.value[1],r.value[2],r.value[3]);break;case"2fv":e.uniform2fv(n,r.value);break;case"mat3":case"mat3fv":e.uniformMatrix3fv(n,!1,r.value);break;default:u.warn(this.constructor.name,"Unknown uniform type: "+r.type)}},t.prototype._cacheAttributeLocations=function(){var t=this,e=this._renderer.getContext();this._attributes.forEach(function(r){t._attributeLocations[r]=e.getAttribLocation(t._program,r)})},t.prototype._cacheUniformLocations=function(){var t=this,e=this._renderer.getContext(),r=Object.keys(this._uniforms);r.forEach(function(r){t._uniformLocations[r]=e.getUniformLocation(t._program,r)})},t.prototype._compile=function(){var t=this._renderer.getContext(),e=this._compileShader(t.VERTEX_SHADER,this._vertexSource),r=this._compileShader(t.FRAGMENT_SHADER,this._fragmentSource),n=t.createProgram();t.attachShader(n,e),t.attachShader(n,r),t.linkProgram(n);var i=t.getProgramParameter(n,t.LINK_STATUS);if(!i){var o=t.getProgramInfoLog(n);t.isContextLost()&&(o="WebGL context lost"),t.deleteProgram(n),u.error(this.constructor.name,"WebGL program linking error: "+o)}this._program=n},t.prototype._compileShader=function(t,e){var r=this._renderer.getContext(),n=r.createShader(t);r.shaderSource(n,e),r.compileShader(n);var i=r.getShaderParameter(n,r.COMPILE_STATUS);if(!i){var o=r.getShaderInfoLog(n);r.isContextLost()&&(o="WebGL context lost"),r.deleteShader(n),u.error(this.constructor.name,"WebGL shader compilation error: "+o)}return n},t.prototype.setUniform=function(t,e){var r=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];this._uniforms[t].value=e,r&&this.syncUniform(t)},t.prototype.setUniforms=function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];for(var r in t)this._uniforms[r].value=t[r],e&&this.syncUniform(r)},t.prototype.getUniforms=function(){return this._uniforms},t.prototype.getAttributes=function(){return this._attributes},t.prototype.getAttributeLocations=function(){return this._attributeLocations},t.prototype.getProgram=function(){return this._program},t.prototype.dispose=function(){var t=this._renderer.getContext();t.deleteProgram(this._program),this._uniforms=null,this._uniformLocations=null,this._attributes=null,this._attributeLocations=null,this._renderer.off("context",this._onContextChange)},t}();e["default"]=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),c=r(44),d=n(c),p=function(t){function e(r,n,i){return(0,o["default"])(this,e),n=n||e.defaultVertexSource,i=i||e.defaultFragmentSource,(0,s["default"])(this,t.call(this,r,n,i,e.defaultUniforms,e.defaultAttributes))}return(0,l["default"])(e,t),e}(d["default"]);p.defaultVertexSource=r(208),p.defaultFragmentSource=r(207);var h=new f.Matrix;p.defaultUniforms={u_image:{type:"sampler2d",value:0},u_projMatrix:{type:"mat3",value:h.toArray()}},p.defaultAttributes=["a_position","a_texCoord","a_color"],e["default"]=p},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),c=function(t){function e(r){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._onSourceLoaded=n._onSourceLoaded.bind(n),n._glTextures={},n._source=r,n._glUnit=0,n._mipMapping=!1,n._magFilter=e.NearestFilter,n._minFilter=e.LinearFilter,n._pixelRatio=1,n._loaded=!1,n._frame=new f.Rectangle(0,0,100,100),r&&n._loadSource(),n}return(0,l["default"])(e,t),e.prototype.resizeTo=function(t){this._frame.width=t.x,this._frame.height=t.y},e.prototype._loadSource=function(){var t=this._source,e=t.complete,r="Canvas"===t.constructor.name||t.tagName&&"CANVAS"===t.tagName.toUpperCase();return e||r?this._onSourceLoaded():void t.addEventListener("load",this._onSourceLoaded)},e.prototype._onSourceLoaded=function(){this._loaded=!0,this._updateGLFilters(),this.emit("loaded"),this.update()},e.prototype._updateGLFilters=function(){var t=new f.Vector2(this._source.width,this._source.height);f.Utils.isPowerOfTwo(t)&&(f.Log.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=e.BilinearFilter,this._mipMapping=!0)},e.prototype.update=function(){this._frame=new f.Rectangle(0,0,this._source.width,this._source.height),this.emit("update")},e.prototype.getGLFilter=function(t,r){var n=function(r){switch(r){case e.LinearFilter:return t.LINEAR;case e.NearestFilter:return t.NEAREST;case e.BilinearFilter:return t.LINEAR_MIPMAP_NEAREST;case e.TrilinearFilter:return t.LINEAR_MIPMAP_LINEAR}};switch(r){case"min":return n(this._minFilter);case"mag":return n(this._magFilter)}},e.prototype.isLoaded=function(){return this._loaded},e.prototype.setLoaded=function(t){this._loaded=t},e.prototype.getSource=function(){return this._source},e.prototype.setSource=function(t){this._source=t},e.prototype.getGLTextureForId=function(t){return this._glTextures[t]},e.prototype.setGLTextureForId=function(t,e){this._glTextures[e]=t},e.prototype.getFrame=function(){return this._frame},e.prototype.setFrame=function(t){this._frame=t},e.prototype.getPixelRatio=function(){return this._pixelRatio},e.prototype.setPixelRatio=function(t){this._pixelRatio=t},e.prototype.getGLUnit=function(){return this._glUnit},e.prototype.setGLUnit=function(t){this._glUnit=t},e.prototype.setMinFilter=function(t){this._minFilter=t},e.prototype.getMinFilter=function(){return this._minFilter},e.prototype.setMagFilter=function(t){this._magFilter=t},e.prototype.getMagFilter=function(){return this._magFilter},e.prototype.disposeGLTextures=function(t){if(t.isOfType("webgl")){var e=t.getContext();e.deleteTexture(this._glTextures[e.id]),delete this._glTextures[e.id]}},e.prototype.isMipMappingEnabled=function(){return this._mipMapping},e.prototype.dispose=function(t){this.disposeGLTextures(t)},e}(f.EventEmitter);c.NearestFilter=0,c.LinearFilter=1,c.BilinearFilter=2,c.TrilinearFilter=3,e["default"]=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=function(t){function e(r,n){(0,o["default"])(this,e);var i=(0,s["default"])(this,t.call(this,n));return i._operation=r,i._dirtiness={},i.id=f.Utils.getUUID(),i._identitySprite=new f.Engine.Sprite,i._sprite=new f.Engine.Sprite,i._options.adjustments&&(i._onOptionsChange=i._onOptionsChange.bind(i),i._options.adjustments.on("updated",i._onOptionsChange)),i}return(0,l["default"])(e,t),e.prototype._onOptionsChange=function(){var t=this._dirtiness;for(var e in t)t[e]=!0},e.prototype.getDisplayObject=function(){return this._sprite},e.prototype.update=function(t){this._sprite.setAnchor(this._options.anchor),this._sprite.setPosition(this._options.position.clone()),this._options.scale&&this._sprite.setScale(this._options.scale.clone()),this._sprite.updateTransform();var e=this._sprite.getTexture().getFrame(),r=new f.Vector2(e.width,e.height);return this._sprite.setPivot(this._options.pivot.clone().multiply(r)),this._sprite.setRotation(this._options.rotation),f.Promise.resolve()},e.prototype.applyFlip=function(t,e){var r=t.getFinalDimensions(),n=this._options.position;switch(e){case"horizontal":n.x=r.x-n.x,this.set({flipHorizontally:!this._options.flipHorizontally,position:n});break;case"vertical":n.y=r.y-n.y,this.set({flipVertically:!this._options.flipVertically,position:n})}},e.prototype.isDirtyForRenderer=function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]},e.prototype.setDirtyForRenderer=function(t,e){this._dirtiness[e.id]=t},e.prototype.setDirty=function(t){for(var e in this._dirtiness)this._dirtiness[e]=t},e.prototype.dispose=function(){this._options.adjustments&&this._options.adjustments.off("updated",this._onOptionsChange)},e}(f.Configurable);e["default"]=c},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports={}},function(t,e){t.exports=!0},function(t,e,r){var n=r(25),i=r(189),o=r(49),a=r(55)("IE_PROTO"),s=function(){},u="prototype",l=function(){var t,e=r(85)("iframe"),n=o.length,i=">";for(e.style.display="none",r(182).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object</script"+i),t.close(),l=t.F;n--;)delete l[u][o[n]];return l()};t.exports=Object.create||function(t,e){var r;return null!==t?(s[u]=n(t),r=new s,s[u]=null,r[a]=t):r=l(),void 0===e?r:i(r,e)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var n=r(15).f,i=r(14),o=r(20)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){var n=r(56)("keys"),i=r(36);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e,r){var n=r(11),i="__core-js_shared__",o=n[i]||(n[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(27);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(11),i=r(18),o=r(51),a=r(60),s=r(15).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,r){e.f=r(20)},function(t,e,r){(function(t,n){function i(t,e){this._id=t,this._clearFn=e}var o=r(37).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,u={},l=0;e.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var r=l++,n=arguments.length<2?!1:s.call(arguments,1);return u[r]=!0,o(function(){u[r]&&(n?t.apply(null,n):t.call(null),e.clearImmediate(r))}),r},e.clearImmediate="function"==typeof n?n:function(t){delete u[t]}}).call(e,r(61).setImmediate,r(61).clearImmediate)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=e.Rectangle=e.Vector2=void 0;var i=r(23),o=n(i),a=r(74),s=n(a),u=r(73),l=n(u);e.Vector2=o["default"],e.Rectangle=s["default"],e.Matrix=l["default"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(8),d=n(c),p=r(21),h=n(p),_=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._onOperationUpdate=n._onOperationUpdate.bind(n),n._stack=r,n._stack.forEach(function(t){t.on("update",n._onOperationUpdate)}),n}return(0,l["default"])(e,t),e.prototype.clear=function(){var t=this;this.forEach(function(e){return t.remove(e)}),this._stack=[]},e.prototype._onOperationUpdate=function(t,e){this.emit(f.Constants.Events.OPERATION_UPDATED,t,e)},e.prototype.forEach=function(t){return this._stack.filter(function(t){return!!t}).forEach(t)},e.prototype.render=function(t){var e=this._stack.filter(function(t){return!!t});e.reverse();var r=e.filter(function(e){return!e.isDirtyForRenderer(t.getRenderer())})[0],n=e.indexOf(r);e.reverse();var i=0;-1!==n&&(i=e.length-n-1);for(var o=0;i>o;o++)f.Log.info(this.constructor.name,"Skipping "+e[o].constructor.name);for(var a=d["default"].resolve(),s=function(r){var n=e[r];a=a.then(function(){return n.render(t)})},u=i;u<e.length;u++)s(u);return a},e.prototype.validateSettings=function(){return d["default"].all(this._stack.filter(function(t){return!!t}).map(function(t){return t.validateSettings()}))},e.prototype.setAllToDirty=function(){this.forEach(function(t){return t.setDirty(!0)})},e.prototype.updateDirtinessForRenderer=function(t){for(var e=!1,r=0;r<this._stack.length;r++){var n=this._stack[r];n&&(n.isDirtyForRenderer(t)&&(e=!0),e&&n.setDirtyForRenderer(!0,t))}},e.prototype.push=function(t){this._stack.push(t),t.on("update",this._onOperationUpdate)},e.prototype.clone=function(){return new e(this._stack.slice(0))},e.prototype.get=function(t){return this._stack[t]},e.prototype.set=function(t,e){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack[t]=e,e.on("update",this._onOperationUpdate)},e.prototype.remove=function(t){var e=this._stack.indexOf(t);-1!==e&&(this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack.splice(e,1))},e.prototype.removeAt=function(t){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack[t]=void 0},e.prototype.getStack=function(){return this._stack},e}(h["default"]);e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(116);Object.defineProperty(e,"FilterOperation",{enumerable:!0,get:function(){return n(i)["default"]}});var o=r(115);Object.defineProperty(e,"CropOperation",{enumerable:!0,get:function(){return n(o)["default"]}});var a=r(159);Object.defineProperty(e,"OrientationOperation",{enumerable:!0,get:function(){return n(a)["default"]}});var s=r(111);Object.defineProperty(e,"AdjustmentsOperation",{enumerable:!0,get:function(){return n(s)["default"]}});var u=r(158);Object.defineProperty(e,"LinearFocusOperation",{enumerable:!0,get:function(){return n(u)["default"]}});var l=r(160);Object.defineProperty(e,"RadialFocusOperation",{enumerable:!0,get:function(){return n(l)["default"]}});var f=r(112);Object.defineProperty(e,"BorderOperation",{enumerable:!0,get:function(){return n(f)["default"]}});var c=r(161);Object.defineProperty(e,"SpriteOperation",{enumerable:!0,get:function(){return n(c)["default"]}});var d=r(166);Object.defineProperty(e,"WatermarkOperation",{enumerable:!0,get:function(){return n(d)["default"]}});var p=r(113);Object.defineProperty(e,"BrushOperation",{enumerable:!0,get:function(){return n(p)["default"]}})},function(t,e){t.exports={name:"photoeditorsdk",version:"3.2.0",description:"The most comprehensive photo editor SDK for HTML5",repository:"http://github.com/imgly/imgly-sdk-html5",author:"Photo Editor SDK <contact@photoeditorsdk.com>",license:"SEE LICENSE IN LICENSE.md",scripts:{release:"node scripts/release","render-filter-previews":"babel-node scripts/render-filter-previews","release:dry":"ENV=production UPLOAD=false node_modules/.bin/gulp release",test:"node_modules/.bin/mocha","test-webgl":"node_modules/.bin/mocha test-webgl",coveralls:"npm run coverage && cat ./coverage/lcov.info | node_modules/.bin/coveralls && rm -rf ./coverage",coverage:"NODE_ENV=test node_modules/.bin/istanbul cover node_modules/.bin/_mocha -x **/ui/**"},devDependencies:{canvas:"^1.3.12",gl:"^3.0.3","babel-core":"^6.6.4","babel-loader":"^6.2.4","babel-plugin-external-helpers-2":"^6.3.13","babel-plugin-transform-es2015-classes":"^6.6.4","babel-plugin-transform-runtime":"^6.6.0","babel-preset-es2015":"^6.6.0","babel-preset-react":"^6.5.0","babel-register":"^6.6.0","babel-runtime":"^6.6.1",chai:"^3.4.0","chai-as-promised":"^5.1.0",classnames:"^2.1.3","compass-mixins":"git://github.com/xzyfer/compass-mixins.git#patch-1",coveralls:"^2.11.2",del:"^2.0.0",gulp:"^3.8.10","gulp-9e-sass-lint":"0.0.8","gulp-changed":"^1.3.0","gulp-github-release":"^1.1.2","gulp-jsdoc3":"^0.2.0","gulp-notify":"^1.3.1","gulp-rename":"~1.2.0","gulp-sass":"^2.0.4","gulp-sequence":"^0.4.1","gulp-sourcemaps":"^1.5.2","gulp-standard":"^6.0.5","gulp-uglify":"^1.4.2","gulp-util":"~2.2.16","gulp-watch":"^4.3.5","gulp-webserver":"^0.9.1","gulp-yuicompressor":"0.0.3","gulp-zip":"^3.2.0",istanbul:"^1.0.0-alpha.2","jaguarjs-jsdoc":"git://github.com/imgly/jaguarjs-jsdoc.git#master",jsdoc:"git://github.com/jsdoc3/jsdoc.git#master","json-loader":"^0.5.2",mocha:"^2.3.3","mocha-lcov-reporter":"0.0.1","performance-now":"^0.2.0",prompt:"^1.0.0","raw-loader":"^0.5.1",react:"^0.14.7","react-dom":"^0.14.7","require-dir":"^0.3.0","run-sequence":"~0.3.6",should:"^4.3.0",sinon:"^1.17.3","sinon-chai":"^2.8.0","transform-loader":"^0.2.2","vinyl-source-stream":"0.1.1",webpack:"^2.1.0-beta.6","webpack-notifier":"^1.2.1","webpack-stream":"^3.2.0"},standard:{globals:["describe","context","before","beforeEach","after","afterEach","it","expect"]}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),c=r(41),d=n(c),p=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._children=[],a._filters=[],a}return(0,l["default"])(e,t),e.prototype.addFilter=function(t){this._filters.push(t)},e.prototype.removeFilter=function(t){
var e=this._filters.indexOf(t);return-1!==e?(this._filters.splice(e,1),!0):!1},e.prototype.setFilters=function(t){this._filters=t},e.prototype.addChild=function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.push(t)},e.prototype.prependChild=function(t){var e=t.getParent();null!==e&&e.removeChild(t),t.setParent(this),this._children.unshift(t)},e.prototype.hasChild=function(t){var e=this._children.indexOf(t);return-1!==e},e.prototype.removeChild=function(t){var e=this._children.indexOf(t);-1!==e?(this._children.splice(e,1),t.setParent(null)):f.Log.info(this.constructor.name,"Tried to remove a child that does not exist")},e.prototype.clearChildren=function(){this._children=[]},e.prototype.renderWebGL=function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),t.getCurrentObjectRenderer().start(),this._renderWebGL(t),this._children.forEach(function(e){e.renderWebGL(t)}),t.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&e.popFilters(),t.getCurrentObjectRenderer().start()}},e.prototype._renderWebGL=function(t){},e.prototype.renderCanvas=function(t){if(this._visible){var e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),this._renderCanvas(t),this._children.forEach(function(e){e.renderCanvas(t)}),this._filters&&this._filters.length&&e.popFilters()}},e.prototype._renderCanvas=function(t){},e.prototype.updateTransform=function(){t.prototype.updateTransform.call(this),this._children.forEach(function(t){t.updateTransform()})},e.prototype.getLocalBounds=function(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()},e.prototype.getBounds=function(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()},e.prototype.getChildren=function(){return this._children},e.prototype.getFilters=function(){return this._filters},e.prototype.dispose=function(){},e}(d["default"]);e["default"]=p},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),c=r(105),d=n(c),p=function(t){function e(r,n){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];(0,o["default"])(this,e);var a=(0,s["default"])(this,t.call(this));return a._options=d["default"].defaults(i,{pixelRatio:1,transparent:!1,clearColor:f.Color.BLACK,debug:!1}),a.setMaxListeners(25),a._width=r||800,a._height=n||600,a._dimensions=new f.Vector2(a._width,a._height),a._maxTextureSize=null,a._pixelRatio=a._options.pixelRatio,a._clearColor=a._options.transparent?f.Color.TRANSPARENT:a._options.clearColor||f.Color.BLACK,a}return(0,l["default"])(e,t),e.prototype.setCanvas=function(t){this._canvas=t,this._createContext(),this._onBeforeContext(),this._setupContext(),this.resizeTo(new f.Vector2(this._width,this._height))},e.prototype.getCanvas=function(){return this._canvas},e.prototype._onBeforeContext=function(){},e.prototype.resizeTo=function(t){var e=this._options.pixelRatio;this._width=t.x*e,this._height=t.y*e,this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style&&(this._canvas.style.width=this._width/e+"px",this._canvas.style.height=this._height/e+"px"),this._dimensions=t.clone()},e.prototype._createContext=function(){f.Log.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")},e.prototype._setupContext=function(){f.Log.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")},e.prototype.render=function(t){f.Log.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")},e.prototype.getMaxDimensions=function(){return null},e.prototype.getContext=function(){return this._context},e.prototype.getWidth=function(){return this._dimensions.x},e.prototype.getHeight=function(){return this._dimensions.y},e.prototype.getDimensions=function(){return this._dimensions},e.prototype.getPixelRatio=function(){return this._pixelRatio},e.prototype.setPixelRatio=function(t){this._pixelRatio=t},e.prototype.getMaxTextureSize=function(){return this._maxTextureSize},e.prototype.getFilterManager=function(){return this._filterManager},e.prototype.setFilterManager=function(t){this._filterManager=t},e.isSupported=function(){return!0},e.prototype.isOfType=function(t){return this._type===t},e.prototype.dispose=function(){f.Log.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")},e}(f.EventEmitter);e["default"]=p},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=function(){function t(e){(0,o["default"])(this,t),this._renderer=e,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}return t.prototype._onContextChange=function(){},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.dispose=function(){this._renderer.off("context",this._onContextChange),this._renderer=null},t}();e["default"]=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),c=r(46),d=n(c),p=r(104),h=n(p),_=function(t){function e(r,n){(0,o["default"])(this,e);var i=(0,s["default"])(this,t.call(this));if(!(r instanceof d["default"]))throw new Error("`baseTexture` should be an instance of BaseTexture");if(i._baseTexture=r,i._uvs=new h["default"],i._frame=n?n.clone():null,i._frameLocked=!!n,i._onBaseTextureLoaded=i._onBaseTextureLoaded.bind(i),i._onBaseTextureUpdated=i._onBaseTextureUpdated.bind(i),i._baseTexture.isLoaded()){var a=r.getFrame(),u=a.width,l=a.height;i._frameLocked||(i._frame=new f.Rectangle(0,0,u,l)),i._onBaseTextureLoaded()}else i._baseTexture.once("loaded",i._onBaseTextureLoaded);return i}return(0,l["default"])(e,t),e.fromImage=function(t){var r=new d["default"](t);return new e(r)},e.fromCanvas=function(t){var r=new d["default"](t);return new e(r)},e.prototype._onBaseTextureLoaded=function(){if(!this._frameLocked){var t=this._baseTexture.getFrame().clone();this.setFrame(t)}this._baseTexture.on("update",this._onBaseTextureUpdated)},e.prototype._onBaseTextureUpdated=function(){var t=this._baseTexture.getFrame(),e=t.width,r=t.height;this._frame.width=e,this._frame.height=r,this.emit("update")},e.prototype._updateUVs=function(){this._uvs.update(this._frame,this._baseTexture.getFrame())},e.prototype.getBaseTexture=function(){return this._baseTexture},e.prototype.setBaseTexture=function(t){this._baseTexture=t},e.prototype.getFrame=function(){return this._frame},e.prototype.setFrame=function(t){this._frame=t,this._updateUVs()},e.prototype.getWidth=function(){return this._frame.width},e.prototype.getHeight=function(){return this._frame.height},e.prototype.getUVs=function(){return this._uvs},e.prototype.getDimensions=function(){return new f.Vector2(this._frame.width,this._frame.height)},e}(f.EventEmitter);e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s="undefined"!=typeof window&&window.performance?window.performance.now.bind(window.performance):r(93),u=function(){function t(e){var r=this;(0,o["default"])(this,t),this._context=e,this._tracking=!1;var n=this,i=function(t){var i=e[t];"function"==typeof i&&(i=function(){for(var r=arguments.length,i=Array(r),o=0;r>o;o++)i[o]=arguments[o];var a=e[t];if(!n._tracking)return a.apply(e,i);var u=s(),l=a.apply(e,i),f=s()-u,c={functionName:t,arguments:i,duration:f};return n._trackedCalls.push(c),l}),r[t]=i};for(var a in e)i(a)}return t.prototype.startFrame=function(){this._tracking=!0,this._trackedCalls=[]},t.prototype.endFrame=function(){var t="Rendering";a.Log.log(t,"Frame rendering results:"),a.Log.log(t,"Context calls: "+this._trackedCalls.length);var e={};this._trackedCalls.forEach(function(t){var r=t.functionName,n=t.duration;e[r]=e[r]||{totalDuration:0,calls:0},e[r].totalDuration+=n,e[r].calls++});var r=[];for(var n in e){var i=e[n];i.averageDuration=i.totalDuration/i.calls,r.push({functionName:n,data:i})}r.sort(function(t,e){return e.data.totalDuration-t.data.totalDuration}),r=r.slice(0,3),r.forEach(function(e){a.Log.log(t,e.functionName+": "+e.data.calls+" calls, "+e.data.totalDuration.toFixed(2)+"ms")})},t}();e["default"]=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(17),s=n(a),u=function(){function t(e,r,n){(0,o["default"])(this,t),this.width=e,this.height=r,this.data=n}return t.fromNodeCanvasImage=function(e){var r=new s["default"](e.width,e.height),n=r.getContext("2d");n.drawImage(e,0,0);var i=n.getImageData(0,0,e.width,e.height);return new t(e.width,e.height,i.data)},t}();e["default"]=u},function(t,e){"use strict";t.exports=function(t,e){var r,n=this;r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return n.apply(this,arguments)};var i;for(i in n)r[i]=n[i];if("undefined"!=typeof e)for(i in e)r[i]=e[i];var o=function(){this.constructor=r};if(o.prototype=n.prototype,r.prototype=new o,t)for(i in t)r.prototype[i]=t[i];return r.__super__=n.prototype,r}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(82),s=n(a),u=r(23),l=n(u),f=function(){function t(){(0,o["default"])(this,t),this.reset()}return t.prototype.multiply=function(t){var e=void 0,r=void 0,n=void 0,i=void 0,o=void 0,a=void 0;return e=this.a*t.a+this.b*t.c,r=this.a*t.b+this.b*t.d,n=this.c*t.a+this.d*t.c,i=this.c*t.b+this.d*t.d,o=this.tx*t.a+this.ty*t.c+t.tx,a=this.tx*t.b+this.ty*t.d+t.ty,this.a=e,this.b=r,this.c=n,this.d=i,this.tx=o,this.ty=a,this},t.prototype.applyToVector=function(t){var e=t,r=e.x,n=e.y;return t=t.clone(),t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.tx,t},t.prototype.applyInverseToVector=function(t){var e=1/(this.a*this.d+this.c*-this.b),r=t,n=r.x,i=r.y;return t=t.clone(),t.x=this.d*e*n+-this.c*e*i+(this.ty*this.c-this.tx*this.d)*e,t.y=this.a*e*i+-this.b*e*n+(-this.ty*this.a+this.tx*this.b)*e,t},t.prototype.rectangleToCoordinates=function(t){var e=arguments.length<=1||void 0===arguments[1]?new l["default"](0,0):arguments[1],r=t.width*(1-e.x),n=t.width*-e.x,i=t.height*(1-e.y),o=t.height*-e.y,a=[];return a.push(new l["default"](this.a*n+this.c*o+this.tx,this.d*o+this.b*n+this.ty)),a.push(new l["default"](this.a*r+this.c*o+this.tx,this.d*o+this.b*r+this.ty)),a.push(new l["default"](this.a*r+this.c*i+this.tx,this.d*i+this.b*r+this.ty)),a.push(new l["default"](this.a*n+this.c*i+this.tx,this.d*i+this.b*n+this.ty)),a},t.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},t.prototype.toArray=function(){var t=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return"undefined"==typeof Float32Array?t:new Float32Array(t)},(0,s["default"])(t,null,[{key:"IDENTITY",get:function(){return new t}}]),t}();e["default"]=f},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],r=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],i=arguments.length<=3||void 0===arguments[3]?0:arguments[3];(0,o["default"])(this,t),this.x=e,this.y=r,this.width=n,this.height=i}return t.prototype.set=function(t,e,r,n){return this.x=t,this.y=e,this.width=r,this.height=n,this},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.equals=function(e,r,n,i){if(e instanceof t)return e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height;var o=e;return o===this.x&&r===this.y&&n===this.width&&i===this.height},t.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this},t.prototype.toString=function(){return"Rectangle({ x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+" })"},t}();e["default"]=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(5),s="undefined"!=typeof window&&window.performance?window.performance.now.bind(window.performance):r(93),u=function(){function t(e,r){(0,o["default"])(this,t),this._tag=e,this._name=r,this._start=s()}return t.prototype.stop=function(){var t=s(),e=t-this._start,r=Math.round(1e3/e);a.Log.info(this._tag,this._name+" took "+e.toFixed(2)+"ms ("+r+" FPS)")},t}();e["default"]=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(211),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options,u=s.brightness,l=s.saturation,f=s.contrast,c=0!==u,d=1!==l,p=1!==f;u=255*u;for(var h=0;h<n.width*n.height;h++){var _=4*h,v=a.data[_],g=a.data[_+1],y=a.data[_+2];if(c&&(v+=u,g+=u,y+=u),d){var m=.2125*v+.7154*g+.0721*y;v=m*(1-l)+v*l,g=m*(1-l)+g*l,y=m*(1-l)+y*l}p&&(v=(v-127)*f+127,g=(g-127)*f+127,y=(y-127)*f+127),a.data[_]=v,a.data[_+1]=g,a.data[_+2]=y}o.putImageData(a,0,0)},e}(f.Engine.Filter);c.prototype.availableOptions={brightness:{type:"number","default":0,uniformType:"f"},saturation:{type:"number","default":1,uniformType:"f"},contrast:{type:"number","default":1,uniformType:"f"}},e["default"]=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=function(){function t(e,r){(0,o["default"])(this,t),this._path=e,this._drawnCanvases=[],this._position=r}return t.prototype.renderToCanvas=function(t,e){if(-1===this._drawnCanvases.indexOf(t)){var r=t.getContext("2d"),n=this._position,i=e.getPosition();r.beginPath(),r.lineJoin="round",r.strokeStyle=this._path.getColor().toRGBA(),r.lineWidth=this._path.getThickness(),r.moveTo(i.x,i.y),r.lineTo(n.x,n.y),r.closePath(),r.stroke(),this._drawnCanvases.push(t)}},t.prototype.setPosition=function(t){this._position=t},t.prototype.getPosition=function(){return this._position.clone()},t.prototype.setDirty=function(){this._drawnCanvases=[]},t}();e["default"]=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(3),d=n(c),p=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,l["default"])(e,t),e.prototype.render=function(t,e){return f.Promise.resolve()},e}(d["default"]);p.isIdentity=!0,p.displayName="Original",p.identifier="identity",e["default"]=p},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(7),c=n(f),d=r(10),p=n(d),h=3,_=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(220),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.lookupTableData,u=0;u<n.width*n.height;u++){var l=4*u,f=a.data[l];a.data[l]=s[4*f];var c=a.data[l+1];a.data[l+1]=s[1+4*c];var d=a.data[l+2];a.data[l+2]=s[2+4*d]}o.putImageData(a,0,0)},e}(c["default"].Filter);_.prototype.availableOptions={lookupTable:{type:"number","default":h,uniformType:"i"},lookupTableData:{type:"array","default":[]}};var v=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new _,a._textures=[],a}return(0,l["default"])(e,t),e.prototype.update=function(t){var e=t.getRenderer();e.isOfType("webgl")?this._updateWebGLTexture(t):e.isOfType("canvas")&&this._filter.setLookupTableData(this._options.data)},e.prototype._updateWebGLTexture=function(t){if("undefined"==typeof this._options.data)throw new Error("LookupTable: No data specified.");var e=new Uint8Array(this._options.data),r=t.getRenderer(),n=r.id;this._textures[n]||(this._textures[n]=new c["default"].BaseTexture);var i=this._textures[n],o=new c["default"].PixelArrayImage(256,1,e);i.setSource(o),i.setGLUnit(h),r.isOfType("webgl")&&r.updateTexture(i)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._textures)delete this._textures[e];delete this._options.data},e}(p["default"]);e["default"]=v},function(t,e){"use strict";function r(t,e,r,a,s,u){if(!(isNaN(u)||1>u)){u|=0;var l,f,c,d,p,h,_,v,g,y,m,x,b,T,w,C,O,R,E,F,P,S,M,A,k,D=t.data,j=u+u+1,B=a-1,I=s-1,U=u+1,L=U*(U+1)/2,z=new n,N=z;for(c=1;j>c;c++)N=N.next=new n,c==U&&(k=N);N.next=z;var V=null,G=null;_=h=0;var W=i[u],H=o[u];for(f=0;s>f;f++){for(C=O=R=E=v=g=y=m=0,x=U*(F=D[h]),b=U*(P=D[h+1]),T=U*(S=D[h+2]),w=U*(M=D[h+3]),v+=L*F,g+=L*P,y+=L*S,m+=L*M,N=z,c=0;U>c;c++)N.r=F,N.g=P,N.b=S,N.a=M,N=N.next;for(c=1;U>c;c++)d=h+((c>B?B:c)<<2),v+=(N.r=F=D[d])*(A=U-c),g+=(N.g=P=D[d+1])*A,y+=(N.b=S=D[d+2])*A,m+=(N.a=M=D[d+3])*A,C+=F,O+=P,R+=S,E+=M,N=N.next;for(V=z,G=k,l=0;a>l;l++)D[h+3]=M=m*W>>H,0!==M?(M=255/M,D[h]=(v*W>>H)*M,D[h+1]=(g*W>>H)*M,D[h+2]=(y*W>>H)*M):D[h]=D[h+1]=D[h+2]=0,v-=x,g-=b,y-=T,m-=w,x-=V.r,b-=V.g,T-=V.b,w-=V.a,d=_+((d=l+u+1)<B?d:B)<<2,C+=V.r=D[d],O+=V.g=D[d+1],R+=V.b=D[d+2],E+=V.a=D[d+3],v+=C,g+=O,y+=R,m+=E,V=V.next,x+=F=G.r,b+=P=G.g,T+=S=G.b,w+=M=G.a,C-=F,O-=P,R-=S,E-=M,G=G.next,h+=4;_+=a}for(l=0;a>l;l++){for(O=R=E=C=g=y=m=v=0,h=l<<2,x=U*(F=D[h]),b=U*(P=D[h+1]),T=U*(S=D[h+2]),w=U*(M=D[h+3]),v+=L*F,g+=L*P,y+=L*S,m+=L*M,N=z,c=0;U>c;c++)N.r=F,N.g=P,N.b=S,N.a=M,N=N.next;for(p=a,c=1;u>=c;c++)h=p+l<<2,v+=(N.r=F=D[h])*(A=U-c),g+=(N.g=P=D[h+1])*A,y+=(N.b=S=D[h+2])*A,m+=(N.a=M=D[h+3])*A,C+=F,O+=P,R+=S,E+=M,N=N.next,I>c&&(p+=a);for(h=l,V=z,G=k,f=0;s>f;f++)d=h<<2,D[d+3]=M=m*W>>H,M>0?(M=255/M,D[d]=(v*W>>H)*M,D[d+1]=(g*W>>H)*M,D[d+2]=(y*W>>H)*M):D[d]=D[d+1]=D[d+2]=0,v-=x,g-=b,y-=T,m-=w,x-=V.r,b-=V.g,T-=V.b,w-=V.a,d=l+((d=f+U)<I?d:I)*a<<2,v+=C+=V.r=D[d],g+=O+=V.g=D[d+1],y+=R+=V.b=D[d+2],m+=E+=V.a=D[d+3],V=V.next,x+=F=G.r,b+=P=G.g,T+=S=G.b,w+=M=G.a,C-=F,O-=P,R-=S,E-=M,G=G.next,h+=a}}}function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}/*!
	
	StackBlur - a fast almost Gaussian Blur For Canvas
	
	Version:  0.5
	Author:   Mario Klingemann
	Contact:  mario@quasimondo.com
	Website:  http://www.quasimondo.com/StackBlurForCanvas
	Twitter:  @quasimondo
	
	In case you find this class useful - especially in commercial projects -
	I am not totally unhappy for a small donation to my PayPal account
	mario@quasimondo.de
	
	Or support me on flattr:
	https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript
	
	Copyright (c) 2010 Mario Klingemann
	
	Permission is hereby granted, free of charge, to any person
	obtaining a copy of this software and associated documentation
	files (the "Software"), to deal in the Software without
	restriction, including without limitation the rights to use,
	copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the
	Software is furnished to do so, subject to the following
	conditions:
	
	The above copyright notice and this permission notice shall be
	included in all copies or substantial portions of the Software.
	
	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
	EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
	OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
	NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
	HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
	WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
	FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
	OTHER DEALINGS IN THE SOFTWARE.
	*/
var i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];t.exports={stackBlurCanvasRGBA:r}},function(t,e,r){t.exports={"default":r(174),__esModule:!0}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=r(81),o=n(i);e["default"]=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o["default"])(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){var n=r(178);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){var n=r(27),i=r(11).document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){t.exports=!r(13)&&!r(33)(function(){return 7!=Object.defineProperty(r(85)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){"use strict";var n=r(51),i=r(26),o=r(92),a=r(19),s=r(14),u=r(50),l=r(185),f=r(54),c=r(191),d=r(20)("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",_="keys",v="values",g=function(){return this};t.exports=function(t,e,r,y,m,x,b){l(r,e,y);var T,w,C,O=function(t){if(!p&&t in P)return P[t];switch(t){case _:return function(){return new r(this,t)};case v:return function(){return new r(this,t)}}return function(){return new r(this,t)}},R=e+" Iterator",E=m==v,F=!1,P=t.prototype,S=P[d]||P[h]||m&&P[m],M=S||O(m),A=m?E?O("entries"):M:void 0,k="Array"==e?P.entries||S:S;if(k&&(C=c(k.call(new t)),C!==Object.prototype&&(f(C,R,!0),n||s(C,d)||a(C,d,g))),E&&S&&S.name!==v&&(F=!0,M=function(){return S.call(this)}),n&&!b||!p&&!F&&P[d]||a(P,d,M),u[e]=M,u[R]=g,m)if(T={values:E?M:O(v),keys:x?M:O(_),entries:A},b)for(w in T)w in P||o(P,w,T[w]);else i(i.P+i.F*(p||F),e,T);return T}},function(t,e,r){var n=r(53),i=r(35),o=r(16),a=r(58),s=r(14),u=r(86),l=Object.getOwnPropertyDescriptor;e.f=r(13)?l:function(t,e){if(t=o(t),e=a(e,!0),u)try{return l(t,e)}catch(r){}return s(t,e)?i(!n.f.call(t,e),t[e]):void 0}},function(t,e,r){var n=r(91),i=r(49).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(14),i=r(16),o=r(180)(!1),a=r(55)("IE_PROTO");t.exports=function(t,e){var r,s=i(t),u=0,l=[];for(r in s)r!=a&&n(s,r)&&l.push(r);for(;e.length>u;)n(s,r=e[u++])&&(~o(l,r)||l.push(r));return l}},function(t,e,r){t.exports=r(19)},function(t,e,r){(function(e){(function(){var r,n,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(r()-i)/1e6},n=e.hrtime,r=function(){var t;return t=n(),1e9*t[0]+t[1]},i=r()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(e,r(37))},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(78);Object.defineProperty(e,"IdentityFilter",{enumerable:!0,get:function(){return n(i)["default"]}});var o=r(117);Object.defineProperty(e,"A15Filter",{enumerable:!0,get:function(){return n(o)["default"]}});var a=r(118);Object.defineProperty(e,"BreezeFilter",{enumerable:!0,get:function(){return n(a)["default"]}});var s=r(119);Object.defineProperty(e,"BWFilter",{enumerable:!0,get:function(){return n(s)["default"]}});var u=r(120);Object.defineProperty(e,"BWHardFilter",{enumerable:!0,get:function(){return n(u)["default"]}});var l=r(121);Object.defineProperty(e,"CelsiusFilter",{enumerable:!0,get:function(){return n(l)["default"]}});var f=r(122);Object.defineProperty(e,"ChestFilter",{enumerable:!0,get:function(){return n(f)["default"]}});var c=r(123);Object.defineProperty(e,"FixieFilter",{enumerable:!0,get:function(){return n(c)["default"]}});var d=r(124);Object.defineProperty(e,"FoodFilter",{enumerable:!0,get:function(){return n(d)["default"]}});var p=r(125);Object.defineProperty(e,"FridgeFilter",{enumerable:!0,get:function(){return n(p)["default"]}});var h=r(126);Object.defineProperty(e,"FrontFilter",{enumerable:!0,get:function(){return n(h)["default"]}});var _=r(127);Object.defineProperty(e,"GlamFilter",{enumerable:!0,get:function(){return n(_)["default"]}});var v=r(128);Object.defineProperty(e,"GobblinFilter",{enumerable:!0,get:function(){return n(v)["default"]}});var g=r(129);Object.defineProperty(e,"K1Filter",{enumerable:!0,get:function(){return n(g)["default"]}});var y=r(130);Object.defineProperty(e,"K2Filter",{enumerable:!0,get:function(){return n(y)["default"]}});var m=r(131);Object.defineProperty(e,"K6Filter",{enumerable:!0,get:function(){return n(m)["default"]}});var x=r(132);Object.defineProperty(e,"KDynamicFilter",{enumerable:!0,get:function(){return n(x)["default"]}});var b=r(133);Object.defineProperty(e,"LeninFilter",{enumerable:!0,get:function(){return n(b)["default"]}});var T=r(134);Object.defineProperty(e,"LomoFilter",{enumerable:!0,get:function(){return n(T)["default"]}});var w=r(135);Object.defineProperty(e,"MellowFilter",{enumerable:!0,get:function(){return n(w)["default"]}});var C=r(136);Object.defineProperty(e,"MorningFilter",{enumerable:!0,get:function(){return n(C)["default"]}});var O=r(137);Object.defineProperty(e,"OrchidFilter",{enumerable:!0,get:function(){return n(O)["default"]}});var R=r(138);Object.defineProperty(e,"PolaFilter",{enumerable:!0,get:function(){return n(R)["default"]}});var E=r(139);Object.defineProperty(e,"Pola669Filter",{enumerable:!0,get:function(){return n(E)["default"]}});var F=r(151);Object.defineProperty(e,"QuoziFilter",{enumerable:!0,get:function(){return n(F)["default"]}});var P=r(152);Object.defineProperty(e,"SemiredFilter",{enumerable:!0,get:function(){return n(P)["default"]}});var S=r(153);Object.defineProperty(e,"SunnyFilter",{enumerable:!0,get:function(){return n(S)["default"]}});var M=r(154);Object.defineProperty(e,"TexasFilter",{enumerable:!0,get:function(){return n(M)["default"]}});var A=r(155);Object.defineProperty(e,"X400Filter",{enumerable:!0,get:function(){return n(A)["default"]}})},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(5),d=r(64),p=n(d),h=r(63),_=i(h),v=r(110),g=i(v),y=r(40),m=i(y),x=r(108),b=i(x),T=r(75),w=i(T),C=c.Constants.RenderType,O=c.Constants.ImageFormat,R=c.Constants.Events,E=function(t){function e(n){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];(0,a["default"])(this,e);var o=(0,u["default"])(this,t.call(this));o._onOperationUpdate=o._onOperationUpdate.bind(o),o._onContextRestored=o._onContextRestored.bind(o);var s=r(65),l=s.version;o.version=l,o._preferredRenderer=n,o._options=c.Utils.defaults(i,{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,zoom:1,spriteScale:1,logLevel:"warn",pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),o._options.extensions=c.Utils.defaults(o._options.extensions,{operations:[],controls:[],languages:[]}),c.Log.setLevel(o._options.logLevel),o._defaultRenderMode=o._options.renderMode,o._offset=new c.Vector2,o._zoom=o._options.zoom,o._spriteScale=o._options.spriteScale,o._operations={},o._renderMode=o._options.renderMode,o._operationsStack=null,o.setOperationsStack(new _["default"]),o._container=new c.Engine.Container,o._sprite=new c.Engine.Sprite,o._container.addChild(o._sprite),o._inputBaseTexture=null,o._inputTexture=null,o._checkForUpdates(),o._registerOperations(),o._options.image&&o.setImage(o._options.image),o._initRenderer();var f=o._renderer.constructor.type;return o._options.displayWelcomeMessage&&c.Log.log("Yo!","Version: "+o.version+" ("+f+") - https://www.photoeditorsdk.com"),(0,c.requestAnimationFrame)(o._init.bind(o)),o}return(0,f["default"])(e,t),e.prototype._init=function(){this._options.image&&this.setImage(this._options.image)},e.prototype._onOperationUpdate=function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];this.emit.apply(this,[R.OPERATION_UPDATED].concat(e))},e.prototype._onContextRestored=function(){c.Log.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach(function(t){t.disposeRenderTexture()}),this.render()},e.prototype["export"]=function(){var t=arguments.length<=0||void 0===arguments[0]?C.DATAURL:arguments[0],e=this,r=arguments.length<=1||void 0===arguments[1]?O.PNG:arguments[1],n=arguments.length<=2||void 0===arguments[2]?.8:arguments[2];this._renderMode="export";var i=this._renderer.getDimensions();return this._renderer.resizeTo(this.getFinalDimensions()),b["default"].validateSettings(t,r).then(function(){return e.render()}).then(function(){return b["default"]["export"](e,e._image,e._renderer.getCanvas(),t,r,n)}).then(function(t){return e._renderer.resizeTo(i),e._renderMode=e._defaultRenderMode,e.setAllOperationsToDirty(),e.render(),t})},e.prototype.render=function(){var t=this;if(!this._image)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");var e=this._renderer.getContext();e.startFrame&&e.startFrame();var r=void 0;c.Log.canLog("info")&&(r=new w["default"]("","Frame rendering")),c.Log.info("","Rendering starts"),this._container.setPosition(0,0),this._container.setScale(1,1),this._sprite.setAnchor(0,0),this._sprite.setPosition(0,0),this._sprite.setScale(1,1),this._sprite.setRotation(0);var n=this._operationsStack;return n.updateDirtinessForRenderer(this._renderer),this._sprite.setTexture(this._inputTexture),this._container.updateTransform(),n.validateSettings().then(function(){return n.render(t,t._sprite)}).then(function(){switch(t._renderMode){case"dynamic":var e=t._renderer.getDimensions().clone().divide(2).add(t._offset);t._container.setScale(t._zoom,t._zoom),t._container.setPosition(e),t._sprite.setAnchor(.5,.5),t._sprite.setScale(t._spriteScale,t._spriteScale);break;case"export":t._container.setScale(1,1),t._sprite.setAnchor(0,0),t._sprite.setPosition(0,0),t._sprite.setScale(1,1),t._sprite.setRotation(0)}t._renderer.render(t._container)}).then(function(){r&&r.stop(),e.endFrame&&e.endFrame()})},e.prototype._registerOperations=function(){this._operations={};for(var t in p){var e=p[t];this._operations[e.identifier]=e}this._operations=c.Utils.extend(this._operations,this._options.extensions.operations)},e.prototype.setAllOperationsToDirty=function(){this._operationsStack.setAllToDirty()},e.prototype.createOperation=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],n=this._operations[t];if(!n)throw new Error("No operation with identifier `"+t+"` found.");var i=new n(this,e);return r&&this.addOperation(i),i},e.prototype.addOperation=function(t){this._operationsStack.push(t)},e.prototype.removeOperation=function(t){this._operationsStack.remove(t)},e.prototype.getInputDimensions=function(){var t=this._inputTexture.getFrame();return new c.Vector2(t.width,t.height)},e.prototype.getFinalDimensions=function(){var t=this.getInputDimensions(),e=this._operationsStack;return e.forEach(function(e){t=e.getNewDimensions(t)}),t.round()},e.prototype.getOutputDimensions=function(){return this.getFinalDimensions().clone().multiply(this._zoom)},e.prototype._checkForUpdates=function(){this._options.versionCheck&&(this._versionChecker=new g["default"](this.version))},e.prototype.createRenderTexture=function(){var t=this._options.pixelRatio,e=this._sprite.getTexture().getFrame();return new c.Engine.RenderTexture(this._renderer,e.width,e.height,t)},e.prototype._initRenderer=function(){var t={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent},e=void 0,r=void 0;if("dynamic"===this._renderMode&&this._options.canvas){var n=this._options.canvas;e=n.width,r=n.height}else if(this._image){var i=this.getFinalDimensions();e=i.x,r=i.y}switch(this._preferredRenderer){case"webgl":this._renderer=c.Engine.autoDetectRenderer(e,r,t),this._renderer.on("context-restored",this._onContextRestored);break;case"canvas":this._renderer=new c.Engine.CanvasRenderer(e,r,t),this._renderer.on("context-restored",this._onContextRestored);break;default:c.Log.warn("PhotoEditorSDK","PhotoEditorSDK Error: Renderer `"+this._preferredRenderer+"` not supported. Falling back to automatically detected renderer."),this._renderer=c.Engine.autoDetectRenderer(e,r,t)}},e.prototype.resizeTo=function(t){this._renderer.resizeTo(t)},e.prototype.reset=function(){this._operationsStack.clear()},e.prototype.parseExif=function(t){if(t){var e=t.src;if("undefined"==typeof window){var n=r(17);t instanceof n.Image&&t.rawSource&&(e=t.rawSource)}if(m["default"].isJPEG(e)){var i=null;try{i=m["default"].fromBase64String(e)}catch(o){}if(!i)return;return i}}},e.prototype._handleExifOrientation=function(){var t=this._exif.getTags();if(t&&t.Orientation){var e=1!==t.Orientation&&2!==t.Orientation,r=-1!==[2,4,5,7].indexOf(t.Orientation),n=void 0;if((e||r)&&(n=this.createOperation("orientation")),e){var i=0;switch(t.Orientation){case 7:case 8:i=-90;break;case 3:case 4:i=-180;break;case 5:case 6:i=90}n.setRotation(i)}-1!==[2,4].indexOf(t.Orientation)&&n.setFlipHorizontally(!0),-1!==[5,7].indexOf(t.Orientation)&&n.setFlipVertically(!0),this._exif.setOrientation(1)}},e.prototype.hasImage=function(){return null!==this._image&&"undefined"!=typeof this._image},e.prototype.getImage=function(){return this._image},e.prototype.setImage=function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];this._options.image=t,this._image=t,e?this._exif=e:this._exif=this.parseExif(t),this._exif&&this._handleExifOrientation();var n=new c.Engine.BaseTexture(this._image),i=new c.Rectangle(0,0,this._image.width,this._image.height);r&&(i.width=r.x,i.height=r.y),this._inputTexture=new c.Engine.Texture(n,i),this._sprite.setTexture(this._inputTexture)},e.prototype.getCanvas=function(){return this._renderer.getCanvas()},e.prototype.setCanvas=function(t){this._renderer.setCanvas(t)},e.prototype.getSprite=function(){return this._sprite},e.prototype.getContainer=function(){return this._container},e.prototype.getOperationsStack=function(){return this._operationsStack},e.prototype.setOperationsStack=function(t){this._operationsStack&&this._operationsStack.off(R.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=t,this._operationsStack.on(R.OPERATION_UPDATED,this._onOperationUpdate)},e.prototype.getOperations=function(){return this._operations},e.prototype.getRenderer=function(){return this._renderer},e.prototype.getOffset=function(){return this._offset},e.prototype.setOffset=function(t,e){t instanceof c.Vector2?this._offset.copy(t):this._offset.set(t,e)},e.prototype.getZoom=function(){return this._zoom},e.prototype.setZoom=function(t){this._zoom=t,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()},e.prototype.getSpriteScale=function(){return this._spriteScale},e.prototype.setSpriteScale=function(t){this._spriteScale=t,this._sprite.setScale(t),this._sprite.updateTransform()},e.prototype.getPixelRatio=function(){return this._options.pixelRatio},e.prototype.getExif=function(){return this._exif},e.prototype.getOptions=function(){return this._options},e.prototype.getInputTexture=function(){return this._inputTexture},e.prototype.dispose=function(){this._renderer.dispose(),this._exif&&this._exif.dispose()},e}(c.EventEmitter);e["default"]=E},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),c=r(31),d=n(c),p=r(44),h=n(p),_=r(45),v=n(_),g=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,l["default"])(e,t),e.prototype._initOptions=function(){this._shaders=[],this._availableUniforms=v["default"].defaultUniforms,this._attributes=v["default"].defaultAttributes,this._vertexSource=v["default"].defaultVertexSource,this._fragmentSource=v["default"].defaultFragmentSource,this._initUniforms(),t.prototype._initOptions.call(this)},e.prototype._initUniforms=function(){this._uniforms={};for(var t in this._availableUniforms){var e=this._availableUniforms[t];this._uniforms[t]={type:e.type,value:e["default"]||null}}for(var r in this.availableOptions){var n=this.availableOptions[r];n.uniformType?this._uniforms["u_"+r]={type:n.uniformType,value:n["default"]||null}:f.Log.trace(this.constructor.name,"Option `"+r+"` is missing a `uniformType`!")}},e.prototype.setOption=function(e,r){var n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];t.prototype.setOption.call(this,e,r,n);var i=r,o=this.availableOptions[e];if(o.uniformType){switch(o.type){case"color":"4f"===o.uniformType?i=r.toGLColor():"3f"===o.uniformType&&(i=r.toRGBGLColor());break;case"vector2":i=[r.x,r.y]}this.setUniform("u_"+e,i)}},e.prototype.setUniform=function(t,e){arguments.length<=2||void 0===arguments[2]?!1:arguments[2];this._uniforms[t].value=e},e.prototype.setUniforms=function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];for(var r in t)this._uniforms[r].value=t[r],e&&this.syncUniform(r)},e.prototype.syncUniform=function(t){this._shaders.forEach(function(e){e.syncUniform(t)})},e.prototype.syncUniforms=function(){this._shaders.forEach(function(t){t.syncUniforms()})},e.prototype.getShaderForRenderer=function(t){var e=t.getContext(),r=this._shaders[e.id];return r||(r=new h["default"](t,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[e.id]=r),r},e.prototype.apply=function(t,e,r){var n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];t.isOfType("webgl")?this._applyWebGL(t,e,r,n):t.isOfType("canvas")&&this._applyCanvas(t,e,r,n)},e.prototype._applyWebGL=function(t,e,r){var n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],i=t.getContext(),o=this.getShaderForRenderer(t);t.setRenderTarget(r),n&&r.clear(),t.setShader(o);var a=t.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",a),o.syncUniforms(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.getTexture()),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)},e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext();f.Log.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`.");var a=i.getImageData(0,0,n.width,n.height);o.putImageData(a,0,0)},e.prototype.dispose=function(){this._shaders.forEach(function(t){return t.dispose()}),this._shaders=[]},e}(d["default"]);e["default"]=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),c=r(70),d=n(c),p=r(67),h=n(p),_=r(29),v=n(_),g=r(42),y=n(g),m=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._type="canvas",a.setCanvas(a._options.canvas||a._createCanvas()),a}return(0,l["default"])(e,t),e.prototype._createCanvas=function(){return f.Utils.createCanvas()},e.prototype._createContext=function(){var t=this._canvas,r=t.getContext("2d");return this._options.debug&&(r=new d["default"](r)),this.id=r.id=e.contextId++,this._context=r,r.renderer=this,this.emit("context",r),r},e.prototype._setupContext=function(){var t=this._context;"imageSmoothingEnabled"in t?t.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach(function(e){t[e]&&(t[e]=!0)}),this._defaultRenderTarget=new v["default"](this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new y["default"](this)},e.prototype.render=function(t){var e=this._renderTarget.getContext(),r=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(r),e.setTransform(1,0,0,1,0,0),e.globalAlpha=1;var n=this._canvas,i=n.width,o=n.height;e.clearRect(0,0,i,o),0!==this._clearColor.a&&(e.save(),e.fillStyle=this._clearColor.toRGBA(),e.fillRect(0,0,i,o),e.restore()),this.renderDisplayObject(t,this._renderTarget)},e.prototype.renderDisplayObject=function(t,e){var r=this._renderTarget;this._filterManager.setFilterStack(e.getFilterStack()),this.setRenderTarget(e),t.renderCanvas(this),this.setRenderTarget(r)},e.prototype.getCurrentRenderTarget=function(){return this._renderTarget},e.prototype.setRenderTarget=function(t){this._renderTarget=t},e.prototype.getContext=function(){return this._renderTarget.getContext()},e.prototype.dispose=function(){this._filterManager.dispose()},e}(h["default"]);m.contextId=0,m.type="Canvas2D",e["default"]=m},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),c=n(f),d=r(68),p=n(d),h=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));a._maxBatchSize=c["default"].BATCH_SIZE,a._vertices=new ArrayBuffer(4*c["default"].BATCH_SIZE*c["default"].VERTEX_BYTE_SIZE),a._positions=new Float32Array(a._vertices),a._colors=new Uint32Array(a._vertices),a._indices=new Uint16Array(6*c["default"].BATCH_SIZE);for(var u=0,l=0;u<6*c["default"].BATCH_SIZE;u+=6,l+=4)a._indices[u+0]=l+0,a._indices[u+1]=l+1,a._indices[u+2]=l+2,a._indices[u+3]=l+0,a._indices[u+4]=l+2,a._indices[u+5]=l+3;return a._shaders=[],a._sprites=[],a._currentBatchSize=0,a._currentBaseTexture=null,a._onContextChange(),a}return(0,l["default"])(e,t),e.prototype.render=function(t){var e=t.getTexture(),r=e.getFrame(),n=e.getBaseTexture();this._currentBatchSize>=this._maxBatchSize&&(this.flush(),this._currentBaseTexture=n);var i=e.getUVs();if(i){var o=this._currentBatchSize*c["default"].VERTEX_BYTE_SIZE;this._addVertexCoordinates(t,o,r),this._addTextureUVs(t,o,i),this._addColors(t,o),this._sprites[this._currentBatchSize]=t,this._currentBatchSize++}},e.prototype._addColors=function(t,e){var r=this._colors,n=t.getTint(),i=(n>>16)+(65280&n)+((255&n)<<16)+(255*t.getWorldAlpha()<<24);r[e+4]=r[e+9]=r[e+14]=r[e+19]=i},e.prototype._addTextureUVs=function(t,e,r){var n=this._positions,i=r.getUVsAt(0);n[e+2]=i.x,n[e+3]=i.y,i=r.getUVsAt(1),n[e+7]=i.x,n[e+8]=i.y,i=r.getUVsAt(2),n[e+12]=i.x,n[e+13]=i.y,i=r.getUVsAt(3),n[e+17]=i.x,n[e+18]=i.y},e.prototype._addVertexCoordinates=function(t,e,r){for(var n=this._positions,i=t.getWorldTransform(),o=t.getAnchor(),a=i.rectangleToCoordinates(r,o),s=5,u=0;4>u;u++)n[e+u*s]=a[u].x,n[e+u*s+1]=a[u].y},e.prototype._onContextChange=function(){var t=this._renderer.getContext();this._shader=this._renderer.shaders["default"],this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this._vertices,t.DYNAMIC_DRAW)},e.prototype.start=function(){this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)},e.prototype.flush=function(){var t=this._renderer,e=t.getContext();if(0!==this._currentBatchSize){if(this._currentBatchSize>.5*c["default"].BATCH_SIZE)e.bufferSubData(e.ARRAY_BUFFER,0,this._vertices);else{var r=this._positions.subarray(0,this._currentBatchSize*c["default"].VERTEX_BYTE_SIZE);e.bufferSubData(e.ARRAY_BUFFER,0,r)}for(var n=0,i=null,o=null,a=null,s=null,u=!1,l=!1,f=null,d=0,p=0,h=this._currentBatchSize;h>p;p++){if(f=this._sprites[p],o=f.getTexture().getBaseTexture(),s=f.getShader()||this._shader,u=a!==s,l=i!==o,(l||u)&&(this._renderBatch(i,n,d),d=p,n=0,i=o,u)){a=s,t.setShader(a);var _=t.getCurrentRenderTarget(),v=_.getProjectionMatrix().toArray();a.setUniform("u_projMatrix",v),a.syncUniforms(),e.activeTexture(e.TEXTURE0)}n++}this._renderBatch(i,n,d),this._currentBatchSize=0,this._sprites=[]}},e.prototype._renderBatch=function(t,e,r){if(0!==e){var n=this._renderer,i=n.getContext(),o=t.getGLTextureForId(i.id);o||(o=n.getOrCreateGLTexture(t),n.updateTexture(t)),i.activeTexture(i.TEXTURE0+t.getGLUnit()),i.bindTexture(i.TEXTURE_2D,o);var a=6*e,s=6*r*2;i.drawElements(i.TRIANGLES,a,i.UNSIGNED_SHORT,s)}},e.prototype.dispose=function(){var e=this._renderer,r=e.getContext();r.deleteBuffer(this._vertexBuffer),r.deleteBuffer(this._indexBuffer),this._vertices=null,this._positions=null,this._colors=null,this._indices=null,t.prototype.dispose.call(this)},e}(p["default"]);e["default"]=h},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),c=r(67),d=n(c),p=r(30),h=n(p),_=r(68),v=n(_),g=r(98),y=n(g),m=r(45),x=n(m),b=r(41),T=n(b),w=r(43),C=n(w),O=r(70),R=n(O),E=r(71),F=n(E),P=r(17),S=n(P),M="undefined"!=typeof S["default"]?S["default"].Image:void 0,A=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._type="webgl",a._textures=[],a._fakeObject=new T["default"],a._onContextLost=a._onContextLost.bind(a),a._onContextRestored=a._onContextRestored.bind(a),a.setCanvas(a._options.canvas||f.Utils.createCanvas()),a.shaders=a._initShaders(),a.renderers=a._initRenderers(),a}return(0,l["default"])(e,t),e.prototype._onContextLost=function(t){t.preventDefault(),f.Log.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")},e.prototype._onContextRestored=function(){var t=this;f.Log.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._textures.forEach(function(e){e.disposeGLTextures(t)}),this._createContext(),this._setupContext(),this.emit("context-restored")},e.prototype._onBeforeContext=function(){this._filterManager=new C["default"](this),this._currentObjectRenderer=new v["default"](this)},e.prototype.setShader=function(t){this._currentShader=t,this._context.useProgram(t.getProgram()),this._setAttributesForShader(t)},e.prototype.setCanvas=function(e){this._canvas&&(this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored)),e.addEventListener&&(e.addEventListener("webglcontextlost",this._onContextLost),e.addEventListener("webglcontextrestored",this._onContextRestored)),t.prototype.setCanvas.call(this,e)},e.prototype._setAttributesForShader=function(t){var e=this._context,r=t.getAttributes(),n=t.getAttributeLocations();r.forEach(function(t){var r=n[t];e.enableVertexAttribArray(r)})},e.prototype._initShaders=function(){return{"default":new x["default"](this)}},e.prototype._initRenderers=function(){return{sprite:new y["default"](this)}},e.prototype._createContext=function(){var t=this._canvas,n=null,i=r(28);if(n=i?i(t.width,t.height,{preserveDrawingBuffer:!0}):t.getContext("webgl")||t.getContext("experimental-webgl"),"undefined"!=typeof window&&window.WebGLDebugUtils&&this._options.debug){var o=function(t,e){console.error("gl."+t+"("+window.WebGLDebugUtils.glFunctionArgsToString(t,e)+")")};n=window.WebGLDebugUtils.makeDebugContext(n,null,o)}return this._options.debug&&(n=new R["default"](n)),this.id=n.id=e.contextId++,this._context=n,n.renderer=this,this._maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),this.emit("context",n),n},e.prototype._setupContext=function(){var t=this._context;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new h["default"](this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget)},e.prototype.resizeTo=function(e){t.prototype.resizeTo.call(this,e),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(e),r(28)&&this._context.resize(e.x,e.y)},e.prototype.setRenderTarget=function(t){this._currentRenderTarget=t,this._currentRenderTarget.activate()},e.prototype.setObjectRenderer=function(t){this._currentObjectRenderer.stop(),this._currentObjectRenderer=t,this._currentObjectRenderer.start()},e.prototype.render=function(t){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);var e=t.getParent();t.setParent(this._fakeObject),t.updateTransform(),t.setParent(e),this.renderDisplayObject(t,this._defaultRenderTarget)},e.prototype.renderDisplayObject=function(t,e){this.setRenderTarget(e),this._filterManager.setFilterStack(e.getFilterStack()),t.renderWebGL(this),this._currentObjectRenderer.flush()},e.prototype.clear=function(){var t=this._context;t.clearColor.apply(t,this._clearColor.toGLColor()),t.clear(t.COLOR_BUFFER_BIT)},e.prototype.getOrCreateGLTexture=function(t){var e=this._context,r=t.getGLTextureForId(e.id);return r||(r=e.createTexture(),t.setGLTextureForId(r,e.id),this._textures.push(t)),r},e.prototype.updateTexture=function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=t.getSource(),i=!!n,o=this._context,a=t.getGLUnit(),s=this.getOrCreateGLTexture(t);o.activeTexture(o.TEXTURE0+a),o.bindTexture(o.TEXTURE_2D,s),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r(28)&&o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!0),e&&i&&("undefined"!=typeof Image&&n instanceof Image||"Canvas"===n.constructor.name||n.tagName&&"CANVAS"===n.tagName.toUpperCase()?o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,n):("undefined"!=typeof M&&n instanceof M&&(n=F["default"].fromNodeCanvasImage(n)),
o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width,n.height,0,o.RGBA,o.UNSIGNED_BYTE,n.data))),t.isMipMappingEnabled()?o.generateMipmap(o.TEXTURE_2D):(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE)),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,t.getGLFilter(o,"min")),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,t.getGLFilter(o,"mag")),o.activeTexture(o.TEXTURE0)},e.prototype.getMaxDimensions=function(){var t=r(28);if(t){var e=t(1,1);return e.getParameter(e.MAX_TEXTURE_SIZE)}var n=f.Utils.createCanvas(),i=n.getContext("webgl")||n.getContext("experimental-webgl");return i?i.getParameter(i.MAX_TEXTURE_SIZE):null},e.prototype.getCurrentRenderTarget=function(){return this._currentRenderTarget},e.prototype.getCurrentObjectRenderer=function(){return this._currentObjectRenderer},e.isSupported=function(){if(r(28))return!0;if("undefined"==typeof window)return!1;var t=f.Utils.createCanvas(),e=t.getContext("webgl")||t.getContext("experimental-webgl");return!!e},e.prototype.dispose=function(){var t=this;this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose(),this._textures.forEach(function(e){e.disposeGLTextures(t)})},e}(d["default"]);A.contextId=0,A.type="WebGL",e["default"]=A},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(45),o=n(i);e["default"]={TextureShader:o["default"]}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),c=r(66),d=n(c),p=function(t){function e(r){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._onTextureUpdate=n._onTextureUpdate.bind(n),n._texture=r,n._shader=null,n._width=0,n._height=0,n._anchor=new f.Vector2(0,0),n.setTexture(r),n}return(0,l["default"])(e,t),e.prototype._onTextureUpdate=function(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype._renderWebGL=function(t){t.setObjectRenderer(t.renderers.sprite),t.renderers.sprite.render(this)},e.prototype._renderCanvas=function(t){var e=this._worldTransform,r=this._texture.getFrame(),n=r.width,i=r.height,o=t.getPixelRatio(),a=this._anchor.x*-n,s=this._anchor.y*-i,u=t.getContext();u.setTransform(e.a,e.b,e.c,e.d,e.tx*o,e.ty*o),u.globalAlpha=this.getWorldAlpha();var l=this._texture.getBaseTexture(),f=l.getPixelRatio();u.drawImage(this._texture.getBaseTexture().getSource(),0,0,n*f,i*f,a*o,s*o,n*o,i*o)},e.prototype.isAtPosition=function(t){var e=this._worldTransform.applyInverseToVector(t),r=this._texture.getFrame(),n=r.width,i=r.height,o=new f.Vector2(-n,-i);o.multiply(this._anchor);var a=o.clone().add(n,i);return!(e.x<o.x||e.x>a.x||e.y<o.y||e.y>a.y)},e.prototype.getLocalBounds=function(){if(this._localBoundsNeedUpdate){var t=this._localBounds,e=this._texture.getFrame();t.x=-e.width*this._anchor.x,t.y=-e.height*this._anchor.y,t.width=e.width,t.height=e.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()},e.prototype.getBounds=function(){var t=this;return this._boundsNeedUpdate&&!function(){var e=t._bounds,r=t._texture.getFrame(),n=t._worldTransform,i=t._anchor,o=n.rectangleToCoordinates(r,i),a=o[0].x,s=o[0].y,u=a,l=s;o.forEach(function(t){var e=t.x,r=t.y;a=Math.min(a,e),s=Math.min(s,r),u=Math.max(u,e),l=Math.max(l,r)}),e.x=a,e.width=Math.abs(u-a),e.y=s,e.height=Math.abs(l-s),t._boundsNeedUpdate=!1}(),this._bounds.clone()},e.prototype.getTexture=function(){return this._texture},e.prototype.setTexture=function(t){t&&(this._texture&&this._texture.off("update",this._onTextureUpdate),this._texture=t,t.getBaseTexture().isLoaded()&&this._onTextureUpdate(),t.on("update",this._onTextureUpdate))},e.prototype.getShader=function(){return this._shader},e.prototype.setShader=function(t){this._shader=t},e.prototype.getWidth=function(){return this._width},e.prototype.setWidth=function(t){this._scale.x=t/this._texture.getFrame().width,this._width=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.getHeight=function(){return this._height},e.prototype.setHeight=function(t){this._scale.y=t/this._texture.getFrame().height,this._height=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.getAnchor=function(){return this._anchor},e.prototype.setAnchor=function(t,e){t instanceof f.Vector2?this._anchor.copy(t):this._anchor.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0},e.prototype.dispose=function(){this._texture&&this._texture.off("update",this._onTextureUpdate)},e}(d["default"]);e["default"]=p},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(6),c=r(69),d=n(c),p=r(46),h=n(p),_=r(30),v=n(_),g=r(29),y=n(g),m=r(43),x=n(m),b=r(42),T=n(b),w=function(t){function e(r){var n=arguments.length<=1||void 0===arguments[1]?100:arguments[1],i=arguments.length<=2||void 0===arguments[2]?100:arguments[2],a=arguments.length<=3||void 0===arguments[3]?1:arguments[3];(0,o["default"])(this,e);var u=new h["default"],l=u.getFrame();l.width=n,l.height=i,u.setPixelRatio(a),u.setLoaded(!0);var c=(0,s["default"])(this,t.call(this,u,new f.Rectangle(0,0,n,i)));return c._loaded=!0,c._width=n,c._height=i,c._pixelRatio=a,c._renderer=r,c._setupFilterManager(),c._setupBuffer(),c._updateUVs(),c}return(0,l["default"])(e,t),e.prototype._setupFilterManager=function(){this._renderer.isOfType("webgl")?this._filterManager=new x["default"](this._renderer):this._renderer.isOfType("canvas")&&(this._filterManager=new T["default"](this._renderer)),this._filterManager.resizeTo(new f.Vector2(this._width,this._height))},e.prototype._setupBuffer=function(){this._renderer.isOfType("webgl")?this._setupWebGLBuffer():this._renderer.isOfType("canvas")&&this._setupCanvasRenderTarget()},e.prototype._setupWebGLBuffer=function(){this._renderTarget=new v["default"](this._renderer,this._width,this._height,this._pixelRatio),this._baseTexture.setGLTextureForId(this._renderTarget.getTexture(),this._renderer.getContext().id)},e.prototype._setupCanvasRenderTarget=function(){this._renderTarget=new y["default"](this._width,this._height,this._pixelRatio),this._baseTexture.setSource(this._renderTarget.getCanvas())},e.prototype.clear=function(t){this._renderTarget.clear(t)},e.prototype.resizeTo=function(t){this._width===t.x&&this._height===t.y||(this._width=t.x,this._height=t.y,this._frame.width=t.x,this._frame.height=t.y,this._baseTexture.resizeTo(t),this._renderTarget.resizeTo(t),this._filterManager.resizeTo(t))},e.prototype.render=function(t){if(this._renderer.isOfType("webgl"))this._renderWebGL(t);else{if(!this._renderer.isOfType("canvas"))throw new Error("RenderTexture does not support rendering via "+this._renderer.constructor.name);this._renderCanvas(t)}},e.prototype._renderWebGL=function(t){this._renderTarget.activate(),t.getWorldTransform().reset(),t.getChildren().forEach(function(t){t.updateTransform()});var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)},e.prototype._renderCanvas=function(t){t.getWorldTransform().reset(),t.getChildren().forEach(function(t){t.updateTransform()});var e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)},e.prototype.getRenderTarget=function(){return this._renderTarget},e.prototype.dispose=function(){this._baseTexture.dispose(this._renderer),this._renderTarget.dispose(),this._filterManager.dispose()},e}(d["default"]);e["default"]=w},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=function(){function t(e){(0,o["default"])(this,t),this._renderer=e,this._vertices=new Float32Array([0,0,100,0,100,100,0,100]),this._uvs=new Float32Array([0,0,1,0,1,1,0,1]),this._indices=new Uint16Array([0,1,2,0,3,2]),this._colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this._initBuffers(),this._uploadBuffers()}return t.prototype.map=function(t,e){var r=e.x,n=e.y;this._uvs[2]=e.width/t.width,this._uvs[4]=this._uvs[2],this._uvs[5]=e.height/t.height,this._uvs[7]=this._uvs[5],this._vertices[0]=r,this._vertices[1]=n,this._vertices[2]=r+e.width,this._vertices[3]=n,this._vertices[4]=this._vertices[2],this._vertices[5]=n+e.height,this._vertices[6]=r,this._vertices[7]=this._vertices[5],this._uploadBuffers()},t.prototype._initBuffers=function(){var t=this._renderer.getContext();this._vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW)},t.prototype._uploadBuffers=function(){var t=this._renderer.getContext();t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this._vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this._uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this._colors)},t.prototype.getVertexBuffer=function(){return this._vertexBuffer},t.prototype.getIndexBuffer=function(){return this._indexBuffer},t.prototype.dispose=function(){var t=this._renderer.getContext();t.deleteBuffer(this._vertexBuffer),t.deleteBuffer(this._indexBuffer)},t}();e["default"]=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(6),s=function(){function t(){(0,o["default"])(this,t),this._uvs=[new a.Vector2(0,0),new a.Vector2(1,0),new a.Vector2(1,1),new a.Vector2(0,1)]}return t.prototype.update=function(t,e){var r=this._uvs[0];r.x=t.x/e.width,r.y=t.y/e.height,r=this._uvs[1],r.x=(t.x+t.width)/e.width,r.y=t.y/e.height,r=this._uvs[2],r.x=(t.x+t.width)/e.width,r.y=(t.y+t.height)/e.height,r=this._uvs[3],r.x=t.x/e.width,r.y=(t.y+t.height)/e.height},t.prototype.getUVsAt=function(t){return this._uvs[t]},t.prototype.getUVs=function(){return this._uvs},t}();e["default"]=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={defaults:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;e>n;n++)r[n-1]=arguments[n];var i={};for(var o in t)i[o]=t[o];for(var a=0;a<r.length;a++){var s=r[a];for(var u in s)"undefined"==typeof i[u]&&(i[u]=s[u])}return i},extend:function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;e>n;n++)r[n-1]=arguments[n];var i={};for(var o in t)i[o]=t[o];for(var a=0;a<r.length;a++){var s=r[a];for(var u in s)i[u]=s[u]}return i}};e["default"]=r},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}var o=r(95),a=i(o),s=r(62),u=n(s),l=r(64),f=n(l),c=r(94),d=n(c),p=r(4),h=n(p),_=r(7),v=i(_),g=r(12),y=i(g),m=r(3),x=i(m),b=r(9),T=i(b),w=r(21),C=i(w),O=r(22),R=i(O),E=r(63),F=i(E),P=r(40),S=i(P),M=r(8),A=i(M),k=r(38),D=r(39),j=i(D);a["default"].version=r(65).version,a["default"].Math=u,a["default"].Operations=f,a["default"].Filters=d,a["default"].FilterPrimitives=h,a["default"].Engine=v["default"],a["default"].Color=y["default"],a["default"].Filter=x["default"],a["default"].Operation=T["default"],a["default"].EventEmitter=C["default"],a["default"].Utils=R["default"],a["default"].OperationsStack=F["default"],a["default"].EXIF=S["default"],a["default"].Promise=A["default"],a["default"].RenderType=k.RenderType,a["default"].ImageFormat=k.ImageFormat,a["default"].Base64=j["default"],t.exports=a["default"]},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=function(){function t(e){(0,o["default"])(this,t),this._head=0,this._buf=e}return t.prototype.peekInt8=function(){return this._buf[this._head]},t.prototype.peekInt16=function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],e=this._buf[this._head],r=this._buf[this._head+1];return t?(r<<8)+e:(e<<8)+r},t.prototype.peekInt24=function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],e=this._buf[this._head],r=this._buf[this._head+1],n=this._buf[this._head+2];return t?(n<<16)+(r<<8)+e:(e<<16)+(r<<8)+n},t.prototype.peekInt32=function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],e=this._buf[this._head],r=this._buf[this._head+1],n=this._buf[this._head+2],i=this._buf[this._head+3];return t?(i<<32)+(n<<16)+(r<<8)+e:(e<<32)+(r<<16)+(n<<8)+i},t.prototype.writeInt16=function(t){this._buf[this._head]=t>>8,this._buf[this._head+1]=255&t},t.prototype.readInt8=function(){var t=this.peekInt8();return this._head+=1,t},t.prototype.readInt16=function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],e=this.peekInt16(t);return this._head+=2,e},t.prototype.readInt24=function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],e=this.peekInt24(t);return this._head+=3,e},t.prototype.readInt32=function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],e=this.peekInt32(t);return this._head+=4,e},t.prototype.readString=function(t){for(var e="",r=0;t>r;r++){var n=this.readInt8();e+=String.fromCharCode(n)}return e},t.prototype.getHead=function(){return this._head},t.prototype.setHead=function(t){this._head=t},t}();e["default"]=a},function(t,e,r){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(38),s=r(22),u=n(s),l=r(8),f=n(l),c=r(40),d=n(c),p=r(109),h=n(p),_=r(17),v=n(_),g=function(){function e(){(0,o["default"])(this,e)}return e.validateSettings=function(e,r){return new f["default"](function(n,i){var o={renderType:e,imageFormat:r};if("undefined"!=typeof o.renderType&&null!==o.renderType&&-1===u["default"].values(a.RenderType).indexOf(o.renderType))throw new Error("Invalid render type: "+o.renderType);if("undefined"==typeof e&&(o.renderType=a.RenderType.DATAURL),"undefined"!=typeof o.imageFormat&&null!==o.imageFormat&&-1===u["default"].values(a.ImageFormat).indexOf(o.imageFormat))throw new Error("Invalid image format: "+o.imageFormat);if("undefined"==typeof r&&(o.imageFormat=a.ImageFormat.PNG),o.renderType===a.RenderType.BUFFER&&"undefined"==typeof t)throw new Error("Render type 'buffer' is only available when using node.js");n(o)})},e["export"]=function(t,e,n,i,o){var s=arguments.length<=5||void 0===arguments[5]?.8:arguments[5];return new f["default"](function(u,l){var f=void 0;if((i===a.RenderType.IMAGE||i===a.RenderType.DATAURL)&&(f="undefined"==typeof window?n.toDataURL(o):n.toDataURL(o,s),d["default"].isJPEG(e.src)&&d["default"].isJPEG(f))){var c=t.getExif();c&&(f=c.restoreExifTags(f))}var p=t.getRenderer();if(p.isOfType("webgl")&&"undefined"!=typeof v["default"]&&n instanceof v["default"]&&h["default"].renderContextToCanvas(p.getContext(),n),i===a.RenderType.IMAGE){var _=void 0;if("undefined"==typeof Image){var g=r(17).Image;_=new g}else _=new Image;_.src=f,u(_)}else i===a.RenderType.DATAURL?u(f):i===a.RenderType.BUFFER?u(n.toBuffer()):i===a.RenderType.MSBLOB?u(n.msToBlob()):i===a.RenderType.BLOB&&n.toBlob(function(t){u(t)},o,s)})},e}();e["default"]=g}).call(e,r(37))},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(17),s=n(a),u=function(){function t(){(0,o["default"])(this,t)}return t.renderContextToCanvas=function(t,e){var r=e.width,n=e.height,i=new Uint8Array(r*n*4);t.readPixels(0,0,r,n,t.RGBA,t.UNSIGNED_BYTE,i);var o=e.getContext("2d"),a=new s["default"].ImageData(r,n),u=0;i.forEach(function(){a.data[u]=i[u],u++}),o.putImageData(a,0,0)},t}();e["default"]=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(5),s="imglySDKVersionCallback",u="https://www.photoeditorsdk.com/version.json?sdk=html5&jsoncallback="+s,l=function(){function t(e){(0,o["default"])(this,t),this._version=e,this._check()}return t.prototype._check=function(){var t=this;if("undefined"==typeof document)return a.Log.info(this.constructor.name,"Not in browser environment. Version check skipped.");var e=this;window[s]=function(r){r.outdated&&a.Log.warn(t.constructor.name,"Your Version "+e._version+" is outdated. Current version is "+r.version+".")};var r=document.createElement("script");r.src=u+"&version="+this._version,r.async=!0,document.getElementsByTagName("head")[0].appendChild(r)},t}();e["default"]=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(8),d=n(c),p=r(9),h=n(p),_=r(76),v=n(_),g=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new v["default"],a._sprite.setFilters([a._filter]),a}return(0,l["default"])(e,t),e.prototype._render=function(t){var e=t.getSprite(),r=this._getRenderTexture(t),n=t.getRenderer();this._sprite.setTexture(e.getTexture());var i=e.getBounds(),o=new f.Vector2(i.width,i.height);return r.resizeTo(o),this._filter.set({brightness:this._options.brightness,saturation:this._options.saturation,contrast:this._options.contrast}),r.render(this._container),e.setTexture(r),this.setDirtyForRenderer(!1,n),d["default"].resolve()},e}(h["default"]);g.identifier="adjustments",g.prototype.availableOptions={brightness:{type:"number","default":0},saturation:{type:"number","default":1},contrast:{type:"number","default":1}},e["default"]=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(9),d=n(c),p=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(213),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getCanvas()),i=r.getContext(),o=this._options,a=o.color,s=o.thickness;i.save(),i.drawImage(n,0,0),i.beginPath(),i.lineWidth=2*s,i.strokeStyle=a.toRGBA(),i.rect(0,0,n.width,n.height),i.stroke(),i.restore()},e}(f.Engine.Filter);p.prototype.availableOptions={color:{type:"color","default":f.Color.BLACK,uniformType:"4f"},thickness:{type:"number","default":0,uniformType:"f"},textureSize:{type:"vector2","default":new f.Vector2(0,0),uniformType:"2f"}};var h=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new p,a._sprite.setFilters([a._filter]),a}return(0,l["default"])(e,t),e.prototype._render=function(t){var e=t.getSprite(),r=this._getRenderTexture(t),n=t.getRenderer();this._sprite.setTexture(e.getTexture());var i=e.getBounds(),o=new f.Vector2(i.width,i.height);r.resizeTo(o);var a=this._options,s=a.color,u=a.thickness;return this._filter.set({color:s,thickness:u,textureSize:o}),r.render(this._container),e.setTexture(r),this.setDirtyForRenderer(!1,n),f.Promise.resolve()},e}(d["default"]);h.identifier="border",h.prototype.availableOptions={color:{type:"color","default":new f.Color(0,0,0,1)},thickness:{type:"number","default":5}},e["default"]=h},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(9),d=n(c),p=r(114),h=n(p),_=r(77),v=n(_),g=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._brushCanvasDirty=!0,a._brushCanvas=f.Utils.createCanvas(),a._texture=f.Engine.Texture.fromCanvas(a._brushCanvas),a._sprite.setTexture(a._texture),a._inputSprite=new f.Engine.Sprite,a._container.removeChild(a._sprite),a._container.addChild(a._inputSprite),a._container.addChild(a._sprite),a._onPathUpdate=a._onPathUpdate.bind(a),a._onOperationUpdate=a._onOperationUpdate.bind(a),a._sdk.on(f.Constants.Events.OPERATION_UPDATED,a._onOperationUpdate),a}return(0,l["default"])(e,t),e.prototype._onPathUpdate=function(){this.setDirty(!0,!1)},e.prototype._onOperationUpdate=function(t,e){var r=t.constructor.identifier;"crop"===r&&"start"in e&&"end"in e&&this._applyCrop(t,e),"orientation"===r&&("rotation"in e&&this._applyRotation(t,e),"flipVertically"in e&&t.getFlipVertically()!==e.flipVertically&&this._applyFlip(t,"vertical"),"flipHorizontally"in e&&t.getFlipHorizontally()!==e.flipHorizontally&&this._applyFlip(t,"horizontal"))},e.prototype._applyCrop=function(t,e){var r=this._sdk.getInputDimensions(),n=t.getStart(),i=e.start;this._options.paths.forEach(function(t){t.forEachControlPoint(function(t){var e=t.getPosition().clone();t.setPosition(e.add(n.clone().subtract(i).multiply(r)))})}),this.setDirty(!0,!0),this.clearBrushCanvas()},e.prototype._applyRotation=function(t,e){var r=t.getRotation(),n=e.rotation,i=n-r,o=this._sdk.getFinalDimensions();this._options.paths.forEach(function(t){t.forEachControlPoint(function(t){var e=t.getPosition().clone();90===i||270===r&&0===n?(e.flip(),e.x=o.y-e.x):(-90===i||-270===r&&0===n)&&(e.flip(),e.y=o.x-e.y),t.setPosition(e)})}),this.setDirty(!0,!0),this.clearBrushCanvas()},e.prototype._applyFlip=function(t,e){var r=t.getRotation();90!==r&&270!==r||(e="vertical"===e?"horizontal":"vertical");var n=this._sdk.getFinalDimensions();this._options.paths.forEach(function(t){t.forEachControlPoint(function(t){var r=t.getPosition().clone();switch(e){case"horizontal":r.x=n.x-r.x;break;case"vertical":r.y=n.y-r.y}t.setPosition(r)})}),this.setDirty(!0,!0),this.clearBrushCanvas()},e.prototype._render=function(t){this.renderBrushCanvas(t);var e=t.getRenderer(),r=t.getSprite();this._inputSprite.setTexture(r.getTexture()),e.isOfType("webgl")&&e.updateTexture(this._texture.getBaseTexture());var n=this._getRenderTexture(t),i=r.getBounds();return n.resizeTo(new f.Vector2(i.width,i.height)),n.render(this._container),r.setTexture(n),f.Promise.resolve()},e.prototype.clearBrushCanvas=function(){if(this._brushCanvas){this._brushCanvasDirty=!0;var t=this._brushCanvas,e=t.getContext("2d");e.clearRect(0,0,t.width,t.height)}},e.prototype.renderBrushCanvas=function(t){var e=arguments.length<=1||void 0===arguments[1]?this._brushCanvas:arguments[1],r=t.getFinalDimensions();e.width===r.x&&e.height===r.y||(e.width=r.x,e.height=r.y,this._texture.getBaseTexture().update());for(var n=this._options.paths,i=0;i<n.length;i++){var o=n[i];o.renderToCanvas(e)}this._brushCanvasDirty=!1},e.prototype.createPath=function(t,r){var n=new e.Path(this,t,r);return n.on("update",this._onPathUpdate),this._options.paths.push(n),this.setDirty(!0),n},e.prototype.setDirtyForRenderer=function(e,r){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];t.prototype.setDirtyForRenderer.call(this,e,r),n&&this._options.paths.forEach(function(t){t.setDirty()})},e.prototype.setDirty=function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];for(var r in this._dirtiness)this.setDirtyForRenderer(t,{id:r},e)},e.prototype.dispose=function(){this._sdk.off(f.Constants.Events.OPERATION_UPDATED,this._onOperationUpdate)},e}(d["default"]);g.identifier="brush",g.prototype.availableOptions={thickness:{type:"number","default":10},color:{type:"color","default":new f.Color(1,0,0,1)},paths:{type:"array","default":[],setter:function(t){return t.forEach(function(t){t.setDirty(!0)}),this.clearBrushCanvas(),this.setDirty(!0),t}}},g.Path=h["default"],g.ControlPoint=v["default"],e["default"]=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(77),d=n(c),p=function(t){function e(r,n,i){(0,o["default"])(this,e);var a=(0,s["default"])(this,t.call(this));return a._thickness=n,a._color=i,a._controlPoints=[],a}return(0,l["default"])(e,t),e.prototype.renderToCanvas=function(t){if(!(this._controlPoints.length<2))for(var e=this._controlPoints[0],r=e,n=1;n<this._controlPoints.length;n++)r=this._controlPoints[n],r.renderToCanvas(t,e),e=r},e.prototype.addControlPoint=function(t){var e=new d["default"](this,t);this._controlPoints.push(e),this.emit("update")},e.prototype.getColor=function(){return this._color},e.prototype.getThickness=function(){return this._thickness},e.prototype.getControlPoints=function(){return this._controlPoints},e.prototype.setDirty=function(){this._controlPoints.forEach(function(t){t.setDirty()})},e.prototype.forEachControlPoint=function(t){this._controlPoints.forEach(t)},e}(f.EventEmitter);e["default"]=p},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(9),d=n(c),p=r(8),h=n(p),_=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._sprite.setAnchor(0,0),a._onOperationUpdate=a._onOperationUpdate.bind(a),a._sdk.on(f.Constants.Events.OPERATION_UPDATED,a._onOperationUpdate),a}return(0,l["default"])(e,t),e.prototype._onOperationUpdate=function(t,e){var r=t.constructor.identifier;"orientation"===r&&("rotation"in e&&this._applyRotation(t,e),("flipVertically"in e||"flipHorizontally"in e)&&this._applyFlip(t,e))},e.prototype._applyRotation=function(t,e){var r=t.getRotation(),n=e.rotation,i=n-r,o=this._options.start.clone(),a=this._options.end.clone(),s=o.clone();90===i||-270===i?(o.set(1-a.y,s.x),a.set(1-s.y,a.x)):-90!==i&&270!==i||(o.set(s.y,1-a.x),a.set(a.y,1-s.x)),this.set({start:o,end:a},!1)},e.prototype._applyFlip=function(t,e){"flipVertically"in e&&t.getFlipVertically()!==e.flipVertically&&this._applyFlipDirection(t,"vertical"),"flipHorizontally"in e&&t.getFlipHorizontally()!==e.flipHorizontally&&this._applyFlipDirection(t,"horizontal")},e.prototype._applyFlipDirection=function(t,e){var r=t.getRotation();90!==r&&270!==r||(e="vertical"===e?"horizontal":"vertical");var n=this._options.start,i=this._options.end;switch(e){case"horizontal":var o=n.x;n.x=1-i.x,i.x=1-o;break;case"vertical":var a=n.y;n.y=1-i.y,i.y=1-a}this.set({start:n,end:i},!1)},e.prototype._render=function(t){var e=t.getRenderer(),r=t.getSprite(),n=this._getRenderTexture(t);this._sprite.setTexture(r.getTexture());var i=r.getBounds(),o=new f.Vector2(i.width,i.height),a=this._options.start.clone().multiply(o),s=this._options.end.clone().multiply(o),u=s.clone().subtract(a).floor();return n.resizeTo(u),this._sprite.setPosition(-a.x,-a.y),n.render(this._container),r.setTexture(n),this.setDirtyForRenderer(!0,e),h["default"].resolve()},e.prototype.getNewDimensions=function(t){t=t.clone();var e=this._options.end.clone().subtract(this._options.start);return e.multiply(t),e},e}(d["default"]);_.identifier="crop",_.prototype.availableOptions={start:{type:"vector2",required:!0,"default":new f.Vector2(0,0)},end:{type:"vector2",required:!0,"default":new f.Vector2(1,1)}},e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(9),d=n(c),p=r(78),h=n(p),_=function(t){function e(){return(0,o["default"])(this,e),(0,s["default"])(this,t.apply(this,arguments))}return(0,l["default"])(e,t),e.prototype._render=function(t){return this._selectedFilter.render(t,this._getRenderTexture(t))},e.prototype.render=function(e){return!this.getEnabled()||this._selectedFilter.constructor.isIdentity?f.Promise.resolve():void t.prototype.render.call(this,e)},e.prototype.setDirtyForRenderer=function(e,r){t.prototype.setDirtyForRenderer.call(this,e,r),this._selectedFilter.setDirtyForRenderer(e,r)},e}(d["default"]);_.identifier="filter",_.prototype.availableOptions={intensity:{type:"number","default":1,setter:function(t){return this._selectedFilter&&this._selectedFilter.setIntensity(t),t}},filter:{type:"object","default":h["default"],setter:function(t){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=new t(this._options.intensity),t}}},e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Contrast({contrast:.63})),o._stack.push(new h.Brightness({brightness:.12})),o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="a15",_.displayName="15",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Desaturation({desaturation:.5})),o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="breeze",_.displayName="Breeze",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Grayscale),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="bw",_.displayName="B&W",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Grayscale),o._stack.push(new h.Contrast({contrast:1.5})),o}return(0,
f["default"])(e,t),e}(d["default"]);_.identifier="bwhard",_.displayName="1920",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="celsius",_.displayName="Celsius",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="chest",_.displayName="Chest",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="fixie",_.displayName="Fixie",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Saturation({saturation:1.35})),o._stack.push(new h.Contrast({contrast:1.1})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="food",_.displayName="Food",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="fridge",_.displayName="Fridge",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="front",_.displayName="Front",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Contrast({contrast:1.1})),o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="glam",_.displayName="Glam",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Gobblin),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="gobblin",_.displayName="Gobblin",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),o._stack.push(new h.Saturation({saturation:.9})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="k1",_.displayName="K1",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=r(12),v=i(_),g=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),o._stack.push(new h.SoftColorOverlay({color:new v["default"](40/255,40/255,40/255)})),o}return(0,f["default"])(e,t),e}(d["default"]);g.identifier="k2",g.displayName="K2",e["default"]=g},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Saturation({saturation:.5})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="k6",_.displayName="K6",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),o._stack.push(new h.Saturation({saturation:.7})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="kdynamic",_.displayName="KDynamic",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Desaturation({desaturation:.4})),o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="lenin",_.displayName="Lenin",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="lomo",_.displayName="Lomo",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="mellow",_.displayName="Mellow",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),o._stack.push(new h.Glow),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="morning",_.displayName="Morning",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]}})),o._stack.push(new h.ToneCurve({controlPoints:[[0,0],[117,151],[189,217],[255,255]]})),o._stack.push(new h.Desaturation({desaturation:.65})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="orchid",_.displayName="Orchid",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),o._stack.push(new h.Saturation({saturation:.8})),o._stack.push(new h.Contrast({contrast:1.5})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="pola",_.displayName="Pola SX",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),o._stack.push(new h.Saturation({saturation:.8})),o._stack.push(new h.Contrast({contrast:1.5})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="pola669",_.displayName="Pola 669",e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(8),d=n(c),p=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(212),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getCanvas()),i=r.getContext(),o=this._options.filteredCanvas;i.save(),i.drawImage(n,0,0),i.globalAlpha=this._options.intensity,i.drawImage(o,0,0),i.restore()},e}(f.Engine.Filter);p.prototype.availableOptions={filteredImage:{type:"number","default":1,uniformType:"i"},filteredCanvas:{type:"object","default":null},intensity:{type:"number","default":1,uniformType:"f"}};var h=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];(0,o["default"])(this,t),this._intensity=e,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new f.Engine.Container,this._sprite=new f.Engine.Sprite,this._container.addChild(this._sprite),this._blendFilter=new p}return t.prototype.push=function(t){this._stack.push(t)},t.prototype.clear=function(){this._stack=[]},t.prototype.render=function(t,e){if(0===this._stack.length)return d["default"].resolve();var r=t.getRenderer(),n=this._renderTextures[r.id];n||(n=this._renderTextures[r.id]=t.createRenderTexture());var i=t.getSprite();this._sprite.setTexture(i.getTexture());var o=i.getBounds(),a=new f.Vector2(o.width,o.height);if(e.resizeTo(a),n.resizeTo(a),this.isDirtyForRenderer(r)){this._stack.forEach(function(e){return e.update(t)});var s=this._stack.map(function(t){return t.getFilter()});this._sprite.setFilters(s),n.render(this._container),this.setDirtyForRenderer(!1,r)}this._blendFilter.setIntensity(this._intensity),r.isOfType("canvas")&&this._blendFilter.setFilteredCanvas(n.getRenderTarget().getCanvas()),this._sprite.setFilters([this._blendFilter]);var u=n.getBaseTexture();return u.setGLUnit(1),r.isOfType("webgl")&&r.updateTexture(u,!1),e.render(this._container),i.setTexture(e),d["default"].resolve()},t.prototype.setIntensity=function(t){this._intensity=t},t.prototype.isDirtyForRenderer=function(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]},t.prototype.setDirtyForRenderer=function(t,e){this._dirtiness[e.id]=t},t.prototype.setDirty=function(t){for(var e in this._dirtiness)this._dirtiness[e]=t},t.prototype.dispose=function(){for(var t in this._renderTextures)this._renderTextures[t].dispose(),delete this._renderTextures[t];this._stack.forEach(function(t){return t.dispose()}),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()},t}();e["default"]=h},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(10),d=n(c),p=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(214),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.brightness;if(0!==s){s=255*s;for(var u=0;u<n.width*n.height;u++){var l=4*u;a.data[l]+=s,a.data[l+1]+=s,a.data[l+2]+=s}o.putImageData(a,0,0)}},e}(f.Engine.Filter);p.prototype.availableOptions={brightness:{type:"number","default":0,uniformType:"f"}};var h=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new p,a}return(0,l["default"])(e,t),e.prototype.update=function(){this._filter.setBrightness(this._options.brightness)},e}(d["default"]);h.prototype.availableOptions=p.prototype.availableOptions,e["default"]=h},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(7),c=n(f),d=r(10),p=n(d),h=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(215),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.contrast;if(1!==s){for(var u=0;u<n.width*n.height;u++){var l=4*u;a.data[l]=(a.data[l]-127)*s+127,a.data[l+1]=(a.data[l+1]-127)*s+127,a.data[l+2]=(a.data[l+2]-127)*s+127}o.putImageData(a,0,0)}},e}(c["default"].Filter);h.prototype.availableOptions={contrast:{type:"number","default":1,uniformType:"f"}};var _=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new h,a}return(0,l["default"])(e,t),e.prototype.update=function(){this._filter.setContrast(this._options.contrast)},e}(p["default"]);_.prototype.availableOptions=h.prototype.availableOptions,e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(7),c=n(f),d=r(10),p=n(d),h=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(216),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.desaturation,u=0;u<n.width*n.height;u++){var l=4*u,f=.3*a.data[l]+.59*a.data[l+1]+.11*a.data[l+2];a.data[l]=f*(1-s)+a.data[l]*s,a.data[l+1]=f*(1-s)+a.data[l+1]*s,a.data[l+2]=f*(1-s)+a.data[l+2]*s}o.putImageData(a,0,0)},e}(c["default"].Filter);h.prototype.availableOptions={desaturation:{type:"number","default":1,uniformType:"f"}};var _=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new h,a}return(0,l["default"])(e,t),e.prototype.update=function(){this._filter.setDesaturation(this._options.desaturation)},e}(p["default"]);_.prototype.availableOptions=h.prototype.availableOptions,e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(7),c=n(f),d=r(10),p=n(d),h=r(12),_=n(h),v=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(217),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n,i=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getCanvas()),o=e.getContext(),a=r.getContext(),s=o.getImageData(0,0,i.width,i.height),u=this._options.color,l=0;l<i.width;l++)for(var f=0;f<i.height;f++){var c=4*(i.width*f+l),d=l/i.width,p=f/i.height,h=(d-.5)/.75,_=(p-.5)/.75,v=h*h,g=_*_;n=1-(v+g),n=Math.min(Math.max(n,.1),1),s.data[c]=s.data[c]*(n*u.r),s.data[c+1]=s.data[c+1]*(n*u.g),s.data[c+2]=s.data[c+2]*(n*u.b),s.data[c+3]=255}a.putImageData(s,0,0)},e}(c["default"].Filter);v.prototype.availableOptions={color:{type:"color","default":_["default"].WHITE,uniformType:"3f"}};var g=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new v,a}return(0,l["default"])(e,t),e.prototype.update=function(){this._filter.setColor(this._options.color)},e}(p["default"]);g.prototype.availableOptions=v.prototype.availableOptions,e["default"]=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(7),c=n(f),d=r(10),p=n(d),h=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(218),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var l=4*(n.width*u+s);a.data[l+2]=.33*a.data[l+1],a.data[l]=.6*a.data[l],a.data[l+2]+=.33*a.data[l],a.data[l+1]=.7*a.data[l+1],a.data[l+3]=255}o.putImageData(a,0,0)},e}(c["default"].Filter),_=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new h,a}return(0,l["default"])(e,t),e}(p["default"]);e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(7),c=n(f),d=r(10),p=n(d),h=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(219),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var l=4*(n.width*u+s),f=.2125*a.data[l]+.7154*a.data[l+1]+.0721*a.data[l+2];a.data[l]=f,a.data[l+1]=f,a.data[l+2]=f}o.putImageData(a,0,0)},e}(c["default"].Filter),_=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new h,a}return(0,l["default"])(e,t),e}(p["default"]);e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(7),c=n(f),d=r(10),p=n(d),h=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(221),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=this._options.saturation,u=0;u<n.width;u++)for(var l=0;l<n.height;l++){var f=4*(n.width*l+u),c=.2125*a.data[f]+.7154*a.data[f+1]+.0721*a.data[f+2];a.data[f]=c*(1-s)+a.data[f]*s,a.data[f+1]=c*(1-s)+a.data[f+1]*s,a.data[f+2]=c*(1-s)+a.data[f+2]*s}o.putImageData(a,0,0)},e}(c["default"].Filter);h.prototype.availableOptions={saturation:{type:"number","default":0,uniformType:"f"}};var _=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new h,a}return(0,l["default"])(e,t),e.prototype.update=function(){this._filter.setSaturation(this._options.saturation)},e}(p["default"]);_.prototype.availableOptions=h.prototype.availableOptions,e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(7),c=n(f),d=r(10),p=n(d),h=r(12),_=n(h),v=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(222),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){var l=4*(n.width*u+s);a.data[l]=Math.max(255*this._options.color.r,a.data[l]),a.data[l+1]=Math.max(255*this._options.color.g,a.data[l+1]),a.data[l+2]=Math.max(255*this._options.color.b,a.data[l+2])}o.putImageData(a,0,0)},e}(c["default"].Filter);v.prototype.availableOptions={color:{type:"color","default":_["default"].WHITE,uniformType:"3f"}};var g=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new v,a}return(0,l["default"])(e,t),e.prototype.update=function(){this._filter.setColor(this._options.color)},e}(p["default"]);g.prototype.availableOptions=v.prototype.availableOptions,e["default"]=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(79),c=n(f),d=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._options.rgbControlPoints||(a._options.rgbControlPoints={red:a._options.controlPoints,green:a._options.controlPoints,blue:a._options.controlPoints}),a._updateLookupTable(),a}return(0,l["default"])(e,t),e.prototype._updateLookupTable=function(){var t=this._calculateSplineCurve(this._options.rgbControlPoints.red),e=this._calculateSplineCurve(this._options.rgbControlPoints.green),r=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(t,e,r)},e.prototype._buildLookupTable=function(t,e,r){for(var n=[],i=0;256>i;i++)n.push(Math.min(Math.max(i+t[i],0),255)),n.push(Math.min(Math.max(i+e[i],0),255)),n.push(Math.min(Math.max(i+r[i],0),255)),n.push(255);return n},e.prototype._calculateSplineCurve=function(t){t=t.sort(function(t,e){return t[0]>e[0]});var e,r=this._getSplineCurve(t),n=r[0];if(n[0]>0)for(e=0;e<n[0];e++)r.unshift([0,0]);var i=[];for(e=0;e<r.length;e++){var o=r[e],a=[o[0],o[0]],s=Math.sqrt(Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2));a[1]>o[1]&&(s=-s),i.push(s)}return i},e.prototype._getSplineCurve=function(t){var e,r=this._secondDerivative(t),n=r.length,i=[];for(e=0;n>e;e++)i[e]=r[e];var o=[];for(e=0;n-1>e;e++)for(var a=t[e],s=t[e+1],u=a[0];u<s[0];u++){var l=(u-a[0])/(s[0]-a[0]),f=1-l,c=l,d=s[0]-a[0],p=f*a[1]+c*s[1]+d*d/6*((f*f*f-f)*i[e]+(c*c*c-c)*i[e+1]);p>255?p=255:0>p&&(p=0),o.push([u,p])}return 255===o.length&&o.push(t[t.length-1]),o},e.prototype._secondDerivative=function(t){var e=t.length;if(0>=e||1===e)return null;var r,n,i=[],o=[];for(i[0]=[0,1,0],r=1;e-1>r;r++){var a=t[r-1],s=t[r],u=t[r+1];i[r]=i[r]||[],i[r][0]=(s[0]-a[0])/6,i[r][1]=(u[0]-a[0])/3,i[r][2]=(u[0]-s[0])/6,o[r]=(u[1]-s[1])/(u[0]-s[0])-(s[1]-a[1])/(s[0]-a[0])}for(o[0]=0,o[e-1]=0,i[e-1]=[0,1,0],r=1;e>r;r++)n=i[1][0]/i[r-1][1],i[r][1]-=n*i[r-1][2],i[r][0]=0,o[r]-=n*o[r-1];for(r=e-2;r>0;r--)n=i[r][2]/i[r+1][1],i[r][1]-=n*i[r+1][0],i[r][2]=0,o[r]-=n*o[r+1];var l=[];for(r=0;e>r;r++)l[r]=o[r]/i[r][1];return l},e}(c["default"]);d.prototype.availableOptions={rgbControlPoints:{type:"object"},controlPoints:{type:"array","default":[]}},e["default"]=d},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(7),c=n(f),d=r(10),p=n(d),h=function(t){function e(){(0,o["default"])(this,e);var n=(0,s["default"])(this,t.call(this));return n._fragmentSource=r(223),n}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){for(var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getCanvas()),i=e.getContext(),o=r.getContext(),a=i.getImageData(0,0,n.width,n.height),s=0;s<n.width;s++)for(var u=0;u<n.height;u++){
var l=4*(n.width*u+s),f=a.data[l]/255*.3+a.data[l+1]/255*.3+a.data[l+2]/255*.3;f-=.2,f=Math.max(0,Math.min(1,f)),f+=.15,f*=1.4,f*=255,a.data[l]=f,a.data[l+1]=f,a.data[l+2]=f}o.putImageData(a,0,0)},e}(c["default"].Filter),_=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._filter=new h,a}return(0,l["default"])(e,t),e}(p["default"]);e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.Desaturation({desaturation:.65})),o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="quozi",_.displayName="Quozi",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),o._stack.push(new h.Glow),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="semired",_.displayName="Semired",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]}})),o._stack.push(new h.ToneCurve({controlPoints:[[0,0],[55,20],[158,191],[255,255]]})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="sunny",_.displayName="Sunny",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.ToneCurve({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}})),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="texas",_.displayName="Texas",e["default"]=_},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),a=i(o),s=r(2),u=i(s),l=r(1),f=i(l),c=r(3),d=i(c),p=r(4),h=n(p),_=function(t){function e(){(0,a["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var o=(0,u["default"])(this,t.call.apply(t,[this].concat(n)));return o._stack.push(new h.X400),o}return(0,f["default"])(e,t),e}(d["default"]);_.identifier="x400",_.displayName="X400",e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(80),d=n(c),p=function(t){function e(){(0,o["default"])(this,e);for(var n=arguments.length,i=Array(n),a=0;n>a;a++)i[a]=arguments[a];var u=(0,s["default"])(this,t.call.apply(t,[this].concat(i)));return u._fragmentSource=r(209),u._lastBlurRadius=null,u._lastGradientRadius=null,u._lastStart=new f.Vector2,u._lastEnd=new f.Vector2,u._blurredRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),u._maskRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),u}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getDimensions()),i=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._outputRenderTexture||(this._outputRenderTexture=new f.Engine.RenderTexture(t,e.getWidth(),e.getHeight(),e.getPixelRatio())),this._lastStart.equals(this._options.start)&&this._lastEnd.equals(this._options.end)&&this._lastGradientRadius===this._options.size&&!i||(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,r)},e.prototype._blurImage=function(t){var e=t.getCanvas(),r=t.getContext(),n=r.getImageData(0,0,e.width,e.height);d["default"].stackBlurCanvasRGBA(n,0,0,e.width,e.height,this._options.blurRadius);var i=this._blurredRenderTarget.getContext();i.putImageData(n,0,0)},e.prototype._renderMask=function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),r=this._maskRenderTarget.getPixelRatio(),n=new f.Vector2(t.width,t.height),i=this._options.size*r,o=this._options.gradientSize*r,a=this._options.start.clone(),s=this._options.end.clone();a.multiply(n),s.multiply(n);var u=s.clone().subtract(a),l=a.clone().add(u.clone().divide(2)),c=u.len(),d=u.clone().divide(c),p=l.clone().add((i+o)*d.y,-(i+o)*d.x),h=l.clone().add(-(i+o)*d.y,(i+o)*d.x),_=e.createLinearGradient(p.x,p.y,h.x,h.y),v=h.clone().subtract(p).len();_.addColorStop(0,"#000000"),_.addColorStop(o/2/v,"#FFFFFF"),_.addColorStop(1-o/2/v,"#FFFFFF"),_.addColorStop(1,"#000000"),e.fillStyle=_,e.fillRect(0,0,t.width,t.height)},e.prototype._applyMask=function(t,e){for(var r=e.getContext(),n=t.getCanvas(),i=t.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=i.getImageData(0,0,n.width,n.height),u=s.data,l=o.getImageData(0,0,n.width,n.height).data,f=a.getImageData(0,0,n.width,n.height).data,c=void 0,d=0;d<n.width*n.height*4;d+=4)c=f[d]/255,u[d]=c*u[d]+(1-c)*l[d],u[d+1]=c*u[d+1]+(1-c)*l[d+1],u[d+2]=c*u[d+2]+(1-c)*l[d+2];r.putImageData(s,0,0)},e}(f.Engine.Filter);p.prototype.availableOptions={blurRadius:{type:"number","default":30,uniformType:"f"},size:{type:"number","default":50,uniformType:"f"},gradientSize:{type:"number","default":50,uniformType:"f"},start:{type:"vector2","default":new f.Vector2(0,.5),uniformType:"2f"},end:{type:"vector2","default":new f.Vector2(1,.5),uniformType:"2f"},delta:{type:"vector2","default":new f.Vector2(1,1),uniformType:"2f"},texSize:{type:"vector2","default":new f.Vector2(100,100),uniformType:"2f"}},e["default"]=p},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(80),d=n(c),p=function(t){function e(){(0,o["default"])(this,e);for(var n=arguments.length,i=Array(n),a=0;n>a;a++)i[a]=arguments[a];var u=(0,s["default"])(this,t.call.apply(t,[this].concat(i)));return u._fragmentSource=r(210),u._lastBlurRadius=null,u._lastGradientRadius=null,u._lastPosition=new f.Vector2,u._blurredRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),u._maskRenderTarget=new f.Engine.CanvasRenderTarget(100,100,1),u}return(0,l["default"])(e,t),e.prototype._applyCanvas=function(t,e,r){var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],e.getDimensions()),i=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions()),this._outputRenderTexture||(this._outputRenderTexture=new f.Engine.RenderTexture(t,e.getWidth(),e.getHeight(),e.getPixelRatio())),this._lastPosition.equals(this._options.position)&&this._lastGradientRadius===this._options.gradientRadius&&!i||(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),(this._lastBlurRadius!==this._options.blurRadius||i)&&(this._blurImage(e),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,r)},e.prototype._blurImage=function(t){var e=t.getCanvas(),r=t.getContext(),n=r.getImageData(0,0,e.width,e.height);d["default"].stackBlurCanvasRGBA(n,0,0,e.width,e.height,this._options.blurRadius);var i=this._blurredRenderTarget.getContext();i.putImageData(n,0,0)},e.prototype._renderMask=function(){var t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),r=new f.Vector2(t.width,t.height),n=this._maskRenderTarget.getPixelRatio(),i=this._options,o=i.radius,a=i.gradientRadius,s=this._options.position.clone().multiply(this._options.texSize).multiply(n),u=e.createRadialGradient(s.x,s.y,0,s.x,s.y,(o+a)*n);u.addColorStop(0,"#FFFFFF"),u.addColorStop(o/(o+a),"#FFFFFF"),u.addColorStop(1,"#000000"),e.fillStyle=u,e.fillRect(0,0,r.x,r.y)},e.prototype._applyMask=function(t,e){for(var r=e.getContext(),n=t.getCanvas(),i=t.getContext(),o=this._blurredRenderTarget.getContext(),a=this._maskRenderTarget.getContext(),s=i.getImageData(0,0,n.width,n.height),u=s.data,l=o.getImageData(0,0,n.width,n.height).data,f=a.getImageData(0,0,n.width,n.height).data,c=void 0,d=0;d<n.width*n.height*4;d+=4)c=f[d]/255,u[d]=c*u[d]+(1-c)*l[d],u[d+1]=c*u[d+1]+(1-c)*l[d+1],u[d+2]=c*u[d+2]+(1-c)*l[d+2];r.putImageData(s,0,0)},e}(f.Engine.Filter);p.prototype.availableOptions={blurRadius:{type:"number","default":30,uniformType:"f"},radius:{type:"number","default":50,uniformType:"f"},gradientRadius:{type:"number","default":25,uniformType:"f"},position:{type:"vector2","default":new f.Vector2(.5,.5),uniformType:"2f"},delta:{type:"vector2","default":new f.Vector2(1,1),uniformType:"2f"},texSize:{type:"vector2","default":new f.Vector2(100,100),uniformType:"2f"}},e["default"]=p},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(9),d=n(c),p=r(8),h=n(p),_=r(156),v=n(_),g=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._lastBlurRadius=a._options.blurRadius,a._lastSize=a._options.size,a._lastGradientSize=a._options.gradientSize,a._horizontalFilter=new v["default"],a._verticalFilter=new v["default"],a._sprite.setFilters([a._horizontalFilter,a._verticalFilter]),a._horizontalFilter.setDelta(new f.Vector2(1,1)),a._verticalFilter.setDelta(new f.Vector2(-1,1)),a._onOperationUpdate=a._onOperationUpdate.bind(a),a._sdk.on(f.Constants.Events.OPERATION_UPDATED,a._onOperationUpdate),a._filter=new v["default"],a}return(0,l["default"])(e,t),e.prototype._onOperationUpdate=function(t,e){var r=t.constructor.identifier;"orientation"===r&&"rotation"in e&&this._applyRotation(t,e),"orientation"===r&&("flipHorizontally"in e||"flipVertically"in e)&&this._applyFlip(t,e)},e.prototype._applyRotation=function(t,e){var r=t.getRotation(),n=e.rotation,i=n-r,o=this._options.start,a=this._options.end;90===i||270===r&&0===n?(o.flip(),o.x=1-o.x,a.flip(),a.x=1-a.x):(-90===i||-270===r&&0===n)&&(o.flip(),o.y=1-o.y,a.flip(),a.y=1-a.y),this.set({start:o,end:a})},e.prototype._applyFlip=function(t,e){"flipVertically"in e&&t.getFlipVertically()!==e.flipVertically&&this._applyFlipDirection(t,"vertical"),"flipHorizontally"in e&&t.getFlipHorizontally()!==e.flipHorizontally&&this._applyFlipDirection(t,"horizontal")},e.prototype._applyFlipDirection=function(t,e){var r=t.getRotation();90!==r&&270!==r||(e="vertical"===e?"horizontal":"vertical");var n=this._options.start,i=this._options.end;switch(e){case"horizontal":n.x=1-n.x,i.x=1-i.x;break;case"vertical":n.y=1-n.y,i.y=1-i.y}this.set({start:n,end:i})},e.prototype._renderWebGL=function(t){var e=t.getRenderer(),r=t.getSprite(),n=this._getRenderTexture(t);this._sprite.setTexture(r.getTexture());var i=r.getBounds(),o=new f.Vector2(i.width,i.height),a=this._options.start.clone(),s=this._options.end.clone();a.multiply(o),s.multiply(o);var u=this._options,l=u.blurRadius,c=u.size,d=u.gradientSize,p={blurRadius:l,size:c,gradientSize:d,start:a,end:s,texSize:o};this._horizontalFilter.set(p),this._verticalFilter.set(p);var _=this._sprite.getBounds();return n.resizeTo(new f.Vector2(_.width,_.height)),n.render(this._container),r.setTexture(n),this.setDirtyForRenderer(!1,e),h["default"].resolve()},e.prototype._renderCanvas=function(t){var e=t.getSprite(),r=this._getRenderTexture(t),n=this._options,i=n.blurRadius,o=n.size,a=n.gradientSize,s=n.start,u=n.end;this._filter.set({blurRadius:i,gradientSize:a,size:o,start:s,end:u,texSize:t.getOutputDimensions()}),this._sprite.setTexture(e.getTexture()),this._sprite.setFilters([this._filter]);var l=this._sprite.getBounds();return r.resizeTo(new f.Vector2(l.width,l.height)),r.render(this._container),e.setTexture(r),h["default"].resolve()},e}(d["default"]);g.identifier="linear-focus",g.prototype.availableOptions={start:{type:"vector2","default":new f.Vector2(0,.5)},end:{type:"vector2","default":new f.Vector2(1,.5)},blurRadius:{type:"number","default":30},size:{type:"number","default":50},gradientSize:{type:"number","default":50}},e["default"]=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(8),d=n(c),p=r(23),h=n(p),_=r(9),v=n(_),g=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._sprite=new f.Engine.Sprite,a._container=new f.Engine.Container,a._container.addChild(a._sprite),a}return(0,l["default"])(e,t),e.prototype._render=function(t){var e=t.getRenderer(),r=t.getSprite(),n=this._getRenderTexture(t),i=this._options.rotation%360,o=i*(Math.PI/180);this._sprite.setScale(this._options.flipHorizontally?-1:1,this._options.flipVertically?-1:1),this._sprite.setRotation(o),this._sprite.setAnchor(.5,.5),this._sprite.setTexture(r.getTexture()),this._sprite.updateTransform();var a=this._sprite.getBounds();return n.resizeTo(new h["default"](a.width,a.height)),this._sprite.setPosition(n.getWidth()/2,n.getHeight()/2),n.render(this._container),r.setTexture(n),this.setDirtyForRenderer(!1,e),d["default"].resolve()},e.prototype.getNewDimensions=function(t){return t=t.clone(),this._options.rotation%180&&t.flip(),t},e}(v["default"]);g.identifier="orientation",g.prototype.availableOptions={rotation:{type:"number","default":0,validation:function(t){if(t%90!==0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:function(t){return t%360}},flipVertically:{type:"boolean","default":!1},flipHorizontally:{type:"boolean","default":!1}},e["default"]=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(9),d=n(c),p=r(8),h=n(p),_=r(157),v=n(_),g=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._lastBlurRadius=a._options.blurRadius,a._lastGradientRadius=a._options.gradientRadius,a._horizontalFilter=new v["default"],a._verticalFilter=new v["default"],a._sprite.setFilters([a._horizontalFilter,a._verticalFilter]),a._horizontalFilter.setDelta(new f.Vector2(1,1)),a._verticalFilter.setDelta(new f.Vector2(-1,1)),a._onOperationUpdate=a._onOperationUpdate.bind(a),a._sdk.on(f.Constants.Events.OPERATION_UPDATED,a._onOperationUpdate),a._filter=new v["default"],a}return(0,l["default"])(e,t),e.prototype._onOperationUpdate=function(t,e){var r=t.constructor.identifier;"orientation"===r&&"rotation"in e&&this._applyRotation(t,e),"orientation"===r&&("flipHorizontally"in e||"flipVertically"in e)&&this._applyFlip(t,e)},e.prototype._applyRotation=function(t,e){var r=t.getRotation(),n=e.rotation,i=n-r,o=this._options.position;90===i||270===r&&0===n?(o.flip(),o.x=1-o.x):(-90===i||-270===r&&0===n)&&(o.flip(),o.y=1-o.y),this.set({position:o})},e.prototype._applyFlip=function(t,e){"flipVertically"in e&&t.getFlipVertically()!==e.flipVertically&&this._applyFlipDirection(t,"vertical"),"flipHorizontally"in e&&t.getFlipHorizontally()!==e.flipHorizontally&&this._applyFlipDirection(t,"horizontal")},e.prototype._applyFlipDirection=function(t,e){var r=t.getRotation();90!==r&&270!==r||(e="vertical"===e?"horizontal":"vertical");var n=this._options.position;switch(e){case"horizontal":n.x=1-n.x;break;case"vertical":n.y=1-n.y}this.set({position:n})},e.prototype._renderWebGL=function(t){var e=t.getRenderer(),r=t.getSprite(),n=this._getRenderTexture(t);this._sprite.setTexture(r.getTexture());var i=r.getBounds(),o=new f.Vector2(i.width,i.height),a=this._options.position.clone();a.multiply(o);var s=this._options,u=s.blurRadius,l=s.radius,c=s.gradientRadius,d={blurRadius:u,radius:l,gradientRadius:c,position:a,texSize:o};this._horizontalFilter.set(d),this._verticalFilter.set(d);var p=this._sprite.getBounds();return n.resizeTo(new f.Vector2(p.width,p.height)),n.render(this._container),r.setTexture(n),this.setDirtyForRenderer(!1,e),h["default"].resolve()},e.prototype._renderCanvas=function(t){var e=t.getSprite(),r=this._getRenderTexture(t),n=this._options,i=n.blurRadius,o=n.radius,a=n.gradientRadius,s=n.position;this._filter.set({blurRadius:i,radius:o,gradientRadius:a,position:s,texSize:t.getOutputDimensions()}),this._sprite.setTexture(e.getTexture()),this._sprite.setFilters([this._filter]);var u=this._sprite.getBounds();return r.resizeTo(new f.Vector2(u.width,u.height)),r.render(this._container),e.setTexture(r),h["default"].resolve()},e}(d["default"]);g.identifier="radial-focus",g.prototype.availableOptions={position:{type:"vector2","default":new f.Vector2(.5,.5)},radius:{type:"number","default":50},gradientRadius:{type:"number","default":25},blurRadius:{type:"number","default":20}},e["default"]=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(9),d=n(c),p=r(47),h=n(p),_=r(162),v=n(_),g=r(163),y=n(g),m=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));a._renderers={},a._onOperationUpdate=a._onOperationUpdate.bind(a),a._onSpriteUpdate=a._onSpriteUpdate.bind(a),a._sdk.on(f.Constants.Events.OPERATION_UPDATED,a._onOperationUpdate);var u=a._options.sprites.slice();return u.forEach(function(t){a.removeSprite(t),a.addSprite(t)}),a}return(0,l["default"])(e,t),e.prototype.getSpritesOfType=function(t){return this._options.sprites.filter(function(e){return e instanceof t})},e.prototype._onOperationUpdate=function(t,e){var r=t.constructor.identifier;"crop"===r&&"start"in e&&"end"in e&&this._applyCrop(t,e),"orientation"===r&&("rotation"in e&&this._applyRotation(t,e),"flipVertically"in e&&t.getFlipVertically()!==e.flipVertically&&this._applyFlip(t,"vertical"),"flipHorizontally"in e&&t.getFlipHorizontally()!==e.flipHorizontally&&this._applyFlip(t,"horizontal"))},e.prototype._applyFlip=function(t,e){var r=this,n=t.getRotation();90!==n&&270!==n||(e="vertical"===e?"horizontal":"vertical"),this._options.sprites.forEach(function(t){t.applyFlip(r._sdk,e)})},e.prototype._onSpriteUpdate=function(t,e){this.setDirty(!0)},e.prototype._applyRotation=function(t,e){var r=t.getRotation(),n=e.rotation,i=n-r,o=this._sdk.getFinalDimensions();this._options.sprites.forEach(function(t){var e=180*t.getRotation()/Math.PI;e+=i,t.setRotation(e*Math.PI/180);var a=t.getPosition().clone();if(90===i||270===r&&0===n){var s=a.x;a.x=o.y-a.y,a.y=s}else if(-90===i||-270===r&&0===n){var u=a.y;a.y=o.x-a.x,a.x=u}t.setPosition(a)})},e.prototype._applyCrop=function(t,e){var r=this._sdk.getInputDimensions(),n=t.getStart(),i=e.start;this._options.sprites.forEach(function(t){var e=t.getPosition().clone();t.set({position:e.add(n.clone().subtract(i).multiply(r))},!1)})},e.prototype._serializeOption=function(e){return"sprites"===e?this._options.sprites.map(function(t){return t.serializeOptions()}):t.prototype._serializeOption.call(this,e)},e.prototype.createSticker=function(t){return new v["default"](this,t)},e.prototype.createText=function(t){return new y["default"](this,t)},e.prototype.addSprite=function(t){this._options.sprites.push(t),this._container.addChild(t.getDisplayObject()),this.setDirty(!0),t.on("update",this._onSpriteUpdate)},e.prototype.removeSprite=function(t){var e=this._options.sprites,r=e.indexOf(t);return-1!==r?(t.off("update",this._onSpriteUpdate),this._container.removeChild(t.getDisplayObject()),e.splice(r,1),!0):!1},e.prototype._render=function(t){var e=t.getSprite(),r=this._getRenderTexture(t);this._sprite.setTexture(e.getTexture());var n=this._container,i=this._options.sprites,o=e.getBounds();return r.resizeTo(new f.Vector2(o.width,o.height)),f.Promise.all(i.map(function(t){return t.validateSettings()})).then(function(){i.forEach(function(e){e.update(t)}),r.clear(),r.render(n),e.setTexture(r)})},e.prototype.takeSpriteToFront=function(t){var e=this._options.sprites,r=e.indexOf(t);if(-1!==r){f.Utils.moveArrayItem(e,r,e.length-1);var n=t.getDisplayObject();this._container.removeChild(n),this._container.addChild(n),this.setDirty(!0)}},e.prototype.getSpriteAtPosition=function(t,e){var r=this;this._options.sprites.forEach(function(t){return t.update(r._sdk)});var n=this._sdk.getSprite(),i=n.getWorldTransform().applyInverseToVector(t),o=n.getTexture().getFrame(),a=o.width,s=o.height,u=n.getAnchor().clone().multiply(-a,-s);i.subtract(u);for(var l=null,f=this._options.sprites.slice(0).reverse(),c=0,d=f.length;d>c;c++){var p=f[c];if((!e||p instanceof e)&&p.getDisplayObject().isAtPosition(i)){l=p;break}}return l},e.prototype.dispose=function(){this._sdk.off(f.Constants.Events.OPERATION_UPDATED,this._onOperationUpdate)},e}(d["default"]);m.Sticker=v["default"],m.Text=y["default"],m.identifier="sprite",m.prototype.availableOptions={sprites:{type:"array","default":[],setter:function(t,e){var r=this;if(t=t.map(function(t,e){if(t instanceof h["default"])return t;var n=t.type;switch(delete t.type,n){case"text":return new y["default"](r,t);case"sticker":return new v["default"](r,t);default:f.Log.error(r.constructor.name,"Invalid sprite type: "+t.type)}}),!e){if(this._options.sprites){var n=this._options.sprites.slice();n.forEach(function(t){r.removeSprite(t)})}t.forEach(function(t){r.addSprite(t)})}return t}}},e["default"]=m},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(47),d=n(c),p=r(76),h=n(p),_=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._options.image&&a._onImageUpdate(),a._renderTextures={},a._adjustmentsFilter=new h["default"],a}return(0,l["default"])(e,t),e.prototype.serializeOptions=function(){var e=t.prototype.serializeOptions.call(this);return e.type="sticker",e},e.prototype.update=function(e){t.prototype.update.call(this,e);var r=e.getRenderer(),n=this._getRenderTexture(r),i=this._hasAdjustments();if(this._identitySprite.setFilters(i?[this._adjustmentsFilter]:[]),i){this._identitySprite.setTexture(this._inputTexture);var o=this._options.adjustments;this._adjustmentsFilter.set({brightness:o.getBrightness(),saturation:o.getSaturation(),contrast:o.getContrast()});var a=this._options.image,s=a.width,u=a.height;n.resizeTo(new f.Vector2(s,u)),n.clear(),n.render(this._identitySprite),this._sprite.setTexture(n)}else this._sprite.setTexture(this._inputTexture);var l=this._sprite.getScale();return this._options.flipVertically&&(l.y*=-1),this._options.flipHorizontally&&(l.x*=-1),this._sprite.setScale(l),f.Promise.resolve()},e.prototype._getRenderTexture=function(t){if(!this._renderTextures[t.id]){var e=this._options.image,r=e.width,n=e.height;this._renderTextures[t.id]=new f.Engine.RenderTexture(t,r,n,1)}return this._renderTextures[t.id]},e.prototype._hasAdjustments=function(){var t=this._options.adjustments;return 0!==t.getBrightness()||1!==t.getSaturation()||1!==t.getContrast()},e.prototype._onImageUpdate=function(){this._inputTexture=f.Engine.Texture.fromImage(this._options.image),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this.setDirty(!0)},e.prototype.setOption=function(e,r){var n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];t.prototype.setOption.call(this,e,r,n),"image"===e&&this._identitySprite&&this._onImageUpdate()},e}(d["default"]);_.prototype.availableOptions={name:{type:"string","default":""},image:{type:"object",required:!0},position:{type:"vector2","default":new f.Vector2(0,0)},scale:{type:"vector2","default":new f.Vector2(1,1)},anchor:{type:"vector2","default":new f.Vector2(0,0)},pivot:{type:"vector2","default":new f.Vector2(.5,.5)},rotation:{type:"number","default":0},flipHorizontally:{type:"boolean","default":!1},flipVertically:{type:"boolean","default":!1},adjustments:{type:"configurable",structure:{brightness:{type:"number","default":0},saturation:{type:"number","default":1},contrast:{type:"number","default":1}}}},e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(47),d=n(c),p=r(164),h=n(p),_=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._textRenderer=new h["default"](a,a._operation),a._sprite.setTexture(a._textRenderer.getTexture()),a}return(0,l["default"])(e,t),e.prototype.serializeOptions=function(){var e=t.prototype.serializeOptions.call(this);return e.type="text",e},e.prototype.getDOMStyle=function(t,e){var r=this._textRenderer.calculateFontStyles(t,!0);return{fontWeight:this._options.fontWeight,fontSize:r.fontSize,fontFamily:this._options.fontFamily,lineHeight:r.lineHeight+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}},e.prototype.getBoundingBox=function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return this._textRenderer.getBoundingBox(t,e)},e.prototype.applyFlip=function(e){t.prototype.applyFlip.call(this,e);var r=this._options.rotation;switch(e){case"horizontal":r+=2*(Math.PI-r),this.setRotation(r);break;case"vertical":r+=2*(Math.PI/2-r),this.setRotation(r)}},e.prototype.update=function(e){this._textRenderer.update(e);var r=this._textRenderer.getTexture(),n=r.getBaseTexture();n.update();var i=e.getRenderer();return i.isOfType("webgl")&&i.updateTexture(r.getBaseTexture()),t.prototype.update.call(this,e)},e}(d["default"]);_.prototype.availableOptions={fontSize:{type:"number","default":30},lineHeight:{type:"number","default":1.1},fontFamily:{type:"string","default":"Times New Roman"},fontWeight:{type:"string","default":"normal"},alignment:{type:"string","default":"left",available:["left","center","right"]},verticalAlignment:{type:"string","default":"top",available:["top","center","bottom"]},color:{type:"color","default":new f.Color(1,0,0,1)},backgroundColor:{type:"color","default":new f.Color(0,0,0,0)},position:{type:"vector2","default":new f.Vector2(0,0)},anchor:{type:"vector2","default":new f.Vector2(.5,.5)},pivot:{type:"vector2","default":new f.Vector2(0,0)},rotation:{type:"number","default":0},text:{type:"string",required:!0},maxWidth:{type:"number","default":100},maxHeight:{type:"number","default":0},flipHorizontally:{type:"boolean","default":!1},flipVertically:{type:"boolean","default":!1}},e["default"]=_},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(5),s=r(165),u=n(s),l=function(){function t(e,r){(0,o["default"])(this,t),this._text=e,this._operation=r,this._createCanvas(),this._createTexture()}return t.prototype._createCanvas=function(){this._canvas=a.Utils.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new u["default"](this._context)},t.prototype._createTexture=function(){this._texture=a.Engine.Texture.fromCanvas(this._canvas)},t.prototype._applyTextOptions=function(t){this._context.font=this._text.getFontWeight()+" "+t.fontSize+"px "+this._text.getFontFamily(),this._context.textBaseline="top",this._context.textAlign=this._text.getAlignment(),this._context.fillStyle=this._text.getColor().toRGBA()},t.prototype._buildOutputLines=function(t){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(t),this._textSplitter.getLines()},t.prototype._renderTextLine=function(t,e){var r=this._text.getAlignment();"center"===r?this._context.fillText(t,this._canvas.width/2,e):"left"===r?this._context.fillText(t,0,e):"right"===r&&this._context.fillText(t,this._canvas.width,e)},t.prototype.update=function(t){var e=this.calculateFontStyles(t),r=this._calculateText(t,e),n=r.boundingBox,i=r.lines;return this._renderText(t,n,i,e)},t.prototype._renderText=function(t,e,r,n){var i=this;return new a.Promise(function(t,o){i._canvas.width=e.x,i._canvas.height=e.y,i._text.getMaxHeight()&&(i._canvas.height=Math.min(i._text.getMaxHeight(),i._canvas.height)),i._context=i._canvas.getContext("2d"),i._context.fillStyle=i._text.getBackgroundColor().toRGBA(),i._context.fillRect(0,0,e.x,e.y),i._applyTextOptions(n);for(var a=0;a<r.length;a++){var s=r[a];i._renderTextLine(s,n.lineHeight*a)}t()})},t.prototype.calculateFontStyles=function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=this._text.getFontSize(),n=this._text.getLineHeight()*r;if(e){var i=t.getZoom();r*=i,n*=i}return{fontSize:r,lineHeight:n}},t.prototype._calculateText=function(t,e){var r=this._text.getMaxWidth();this._applyTextOptions(e);
var n=new a.Vector2,i=this._text.getText().split("\n");if("undefined"!=typeof r)n.x=r,i=this._buildOutputLines(r);else for(var o=0;o<i.length;o++){var s=i[o];n.x=Math.max(n.x,this._context.measureText(s).width)}return n.y=e.lineHeight*i.length,{boundingBox:n,lines:i}},t.prototype.getTexture=function(){return this._texture},t.prototype.getBoundingBox=function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],r=this.calculateFontStyles(t),n=this._calculateText(t,r),i=n.boundingBox;return e&&i.multiply(t.getZoom()),i},t}();e["default"]=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=function(){function t(e){(0,o["default"])(this,t),this._context=e,this._lastFontStyle={},this._characterWidthCache={}}return t.prototype.getLines=function(){this._fontStyleChanged()&&(this._characterWidthCache={});for(var t=[],e=[],r=this._lines.length,n=0;r>n;n++){for(var i=this._lines[n],o=this._buildWords(i),a=o.length,s=0;a>s;s++){var u=o[s],l=e.concat(u).join("").replace(/\s+$/i,""),f=this._getWidth(l);if(f>this._maxWidth){e.length>0&&(t.push(e.join("")),e=[u]);var c=u.replace(/\s+$/i,"");if(this._getWidth(c)>this._maxWidth){var d=this._splitWord(u);t=t.concat(d.lines),d.rest&&(e=[d.rest])}}else e.push(u)}t.push(e.join("")),e=[]}return t},t.prototype._buildWords=function(t){for(var e=[],r="",n=t.length,i=0;n>i;i++){var o=t[i];r+=o," "!==o&&"-"!==o&&i!==n-1||(e.push(r),r="")}return e},t.prototype._splitWord=function(t){for(var e={lines:[],rest:null},r=t.length,n=[],i=0;r>i;i++){var o=t[i];this._getWidth(n.concat(o).join(""))>this._maxWidth?(n.length>0&&e.lines.push(n.join("")),n=[o]):n.push(o),i===r-1&&n.length>0&&(e.rest=n.join(""))}return e},t.prototype._fontStyleChanged=function(){return this._context.font!==this._lastFontStyle?(this._lastFontStyle=this._context.font,!0):!1},t.prototype._getWidth=function(t){for(var e=0,r=t.length,n=0;r>n;n++){var i=t[n];if(!this._characterWidthCache[i]){var o=this._context.measureText(i).width;this._characterWidthCache[i]=o}e+=this._characterWidthCache[i]}return e},t.prototype.setText=function(t){this._text=t,this._lines=t.split("\n")},t.prototype.setMaxWidth=function(t){this._maxWidth=t},t}();e["default"]=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),o=n(i),a=r(2),s=n(a),u=r(1),l=n(u),f=r(5),c=r(9),d=n(c),p=function(t){function e(){(0,o["default"])(this,e);for(var r=arguments.length,n=Array(r),i=0;r>i;i++)n[i]=arguments[i];var a=(0,s["default"])(this,t.call.apply(t,[this].concat(n)));return a._watermarkSprite=new f.Engine.Sprite,a._watermarkSprite.setAnchor(.5,.5),a._container.addChild(a._watermarkSprite),a}return(0,l["default"])(e,t),e.prototype._render=function(t){this._watermarkTexture||(this._watermarkTexture=f.Engine.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));var e=t.getSprite(),r=e.getBounds(),n=new f.Vector2(r.width,r.height),i=this._getRenderTexture(t);i.resizeTo(n),this._sprite.setTexture(e.getTexture());var o=this._options.image,a=o.width,s=o.height,u=f.Utils.resizeVectorToFit(new f.Vector2(a,s),n);return this._watermarkSprite.setPosition(n.x/2,n.y/2),this._watermarkSprite.setWidth(u.x),this._watermarkSprite.setHeight(u.y),i.render(this._container),e.setTexture(i),f.Promise.resolve()},e}(d["default"]);p.identifier="watermark",p.prototype.availableOptions={image:{type:"object",required:!0}},e["default"]=p},function(t,e){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var r="undefined"==typeof window?t:window,n=r.requestAnimationFrame,i=r.cancelAnimationFrame,o=0,a=["ms","moz","webkit","o"],s=0;s<a.length&&!n;++s)e.requestAnimationFrame=n=r[a[s]+"RequestAnimationFrame"],e.cancelAnimationFrame=i=r[a[s]+"CancelAnimationFrame"]||r[a[s]+"CancelRequestAnimationFrame"];n||(e.requestAnimationFrame=n=function(t,e){var r=(new Date).getTime(),n=Math.max(0,16-(r-o)),i=setTimeout(function(){t(r+n)},n);return o=r+n,i}),i||(e.cancelAnimationFrame=i=function(t){clearTimeout(t)}),e.requestAnimationFrame=n,e.cancelAnimationFrame=i}).call(e,function(){return this}())},function(t,e,r){t.exports={"default":r(173),__esModule:!0}},function(t,e,r){t.exports={"default":r(175),__esModule:!0}},function(t,e,r){t.exports={"default":r(176),__esModule:!0}},function(t,e,r){t.exports={"default":r(177),__esModule:!0}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=r(81),o=n(i);e["default"]=function(t,e,r){return e in t?(0,o["default"])(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e,r){r(198);var n=r(18).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,r){r(199);var n=r(18).Object;t.exports=function(t,e,r){return n.defineProperty(t,e,r)}},function(t,e,r){r(200),t.exports=r(18).Object.setPrototypeOf},function(t,e,r){r(203),r(201),r(204),r(205),t.exports=r(18).Symbol},function(t,e,r){r(202),r(206),t.exports=r(60).f("iterator")},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(){}},function(t,e,r){var n=r(16),i=r(195),o=r(194);t.exports=function(t){return function(e,r,a){var s,u=n(e),l=i(u.length),f=o(a,l);if(t&&r!=r){for(;l>f;)if(s=u[f++],s!=s)return!0}else for(;l>f;f++)if((t||f in u)&&u[f]===r)return t||f||0;return!t&&-1}}},function(t,e,r){var n=r(34),i=r(90),o=r(53);t.exports=function(t){var e=n(t),r=i.f;if(r)for(var a,s=r(t),u=o.f,l=0;s.length>l;)u.call(t,a=s[l++])&&e.push(a);return e}},function(t,e,r){t.exports=r(11).document&&document.documentElement},function(t,e,r){var n=r(83);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,r){var n=r(83);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){"use strict";var n=r(52),i=r(35),o=r(54),a={};r(19)(a,r(20)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(a,{next:i(1,r)}),o(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){var n=r(34),i=r(16);t.exports=function(t,e){for(var r,o=i(t),a=n(o),s=a.length,u=0;s>u;)if(o[r=a[u++]]===e)return r}},function(t,e,r){var n=r(36)("meta"),i=r(27),o=r(14),a=r(15).f,s=0,u=Object.isExtensible||function(){return!0},l=!r(33)(function(){return u(Object.preventExtensions({}))}),f=function(t){a(t,n,{value:{i:"O"+ ++s,w:{}}})},c=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!u(t))return"F";if(!e)return"E";f(t)}return t[n].i},d=function(t,e){if(!o(t,n)){if(!u(t))return!0;if(!e)return!1;f(t)}return t[n].w},p=function(t){return l&&h.NEED&&u(t)&&!o(t,n)&&f(t),t},h=t.exports={KEY:n,NEED:!1,fastKey:c,getWeak:d,onFreeze:p}},function(t,e,r){var n=r(15),i=r(25),o=r(34);t.exports=r(13)?Object.defineProperties:function(t,e){i(t);for(var r,a=o(e),s=a.length,u=0;s>u;)n.f(t,r=a[u++],e[r]);return t}},function(t,e,r){var n=r(16),i=r(89).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(n(t))}},function(t,e,r){var n=r(14),i=r(196),o=r(55)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,r){var n=r(27),i=r(25),o=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r(84)(Function.call,r(88).f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,r){return o(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:o}},function(t,e,r){var n=r(57),i=r(48);t.exports=function(t){return function(e,r){var o,a,s=String(i(e)),u=n(r),l=s.length;return 0>u||u>=l?t?"":void 0:(o=s.charCodeAt(u),55296>o||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):(o-55296<<10)+(a-56320)+65536)}}},function(t,e,r){var n=r(57),i=Math.max,o=Math.min;t.exports=function(t,e){return t=n(t),0>t?i(t+e,0):o(t,e)}},function(t,e,r){var n=r(57),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e,r){var n=r(48);t.exports=function(t){return Object(n(t))}},function(t,e,r){"use strict";var n=r(179),i=r(186),o=r(50),a=r(16);t.exports=r(87)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,r):"values"==e?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e,r){var n=r(26);n(n.S,"Object",{create:r(52)})},function(t,e,r){var n=r(26);n(n.S+n.F*!r(13),"Object",{defineProperty:r(15).f})},function(t,e,r){var n=r(26);n(n.S,"Object",{setPrototypeOf:r(192).set})},function(t,e){},function(t,e,r){"use strict";var n=r(193)(!0);r(87)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){"use strict";var n=r(11),i=r(14),o=r(13),a=r(26),s=r(92),u=r(188).KEY,l=r(33),f=r(56),c=r(54),d=r(36),p=r(20),h=r(60),_=r(59),v=r(187),g=r(181),y=r(184),m=r(25),x=r(16),b=r(58),T=r(35),w=r(52),C=r(190),O=r(88),R=r(15),E=r(34),F=O.f,P=R.f,S=C.f,M=n.Symbol,A=n.JSON,k=A&&A.stringify,D="prototype",j=p("_hidden"),B=p("toPrimitive"),I={}.propertyIsEnumerable,U=f("symbol-registry"),L=f("symbols"),z=Object[D],N="function"==typeof M,V=n.QObject,G=!V||!V[D]||!V[D].findChild,W=o&&l(function(){return 7!=w(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=F(z,e);n&&delete z[e],P(t,e,r),n&&t!==z&&P(z,e,n)}:P,H=function(t){var e=L[t]=w(M[D]);return e._k=t,e},X=N&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},q=function(t,e,r){return m(t),e=b(e,!0),m(r),i(L,e)?(r.enumerable?(i(t,j)&&t[j][e]&&(t[j][e]=!1),r=w(r,{enumerable:T(0,!1)})):(i(t,j)||P(t,j,T(1,{})),t[j][e]=!0),W(t,e,r)):P(t,e,r)},Y=function(t,e){m(t);for(var r,n=g(e=x(e)),i=0,o=n.length;o>i;)q(t,r=n[i++],e[r]);return t},K=function(t,e){return void 0===e?w(t):Y(w(t),e)},Z=function(t){var e=I.call(this,t=b(t,!0));return e||!i(this,t)||!i(L,t)||i(this,j)&&this[j][t]?e:!0},J=function(t,e){var r=F(t=x(t),e=b(e,!0));return!r||!i(L,e)||i(t,j)&&t[j][e]||(r.enumerable=!0),r},Q=function(t){for(var e,r=S(x(t)),n=[],o=0;r.length>o;)i(L,e=r[o++])||e==j||e==u||n.push(e);return n},$=function(t){for(var e,r=S(x(t)),n=[],o=0;r.length>o;)i(L,e=r[o++])&&n.push(L[e]);return n};N||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0);return o&&G&&W(z,t,{configurable:!0,set:function(e){i(this,j)&&i(this[j],t)&&(this[j][t]=!1),W(this,t,T(1,e))}}),H(t)},s(M[D],"toString",function(){return this._k}),O.f=J,R.f=q,r(89).f=C.f=Q,r(53).f=Z,r(90).f=$,o&&!r(51)&&s(z,"propertyIsEnumerable",Z,!0),h.f=function(t){return H(p(t))}),a(a.G+a.W+a.F*!N,{Symbol:M});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var tt=E(p.store),et=0;tt.length>et;)_(tt[et++]);a(a.S+a.F*!N,"Symbol",{"for":function(t){return i(U,t+="")?U[t]:U[t]=M(t)},keyFor:function(t){if(X(t))return v(U,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){G=!0},useSimple:function(){G=!1}}),a(a.S+a.F*!N,"Object",{create:K,defineProperty:q,defineProperties:Y,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),A&&a(a.S+a.F*(!N||l(function(){var t=M();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!X(t)){for(var e,r,n=[t],i=1;arguments.length>i;)n.push(arguments[i++]);return e=n[1],"function"==typeof e&&(r=e),!r&&y(e)||(e=function(t,e){return r&&(e=r.call(this,t,e)),X(e)?void 0:e}),n[1]=e,k.apply(A,n)}}}),M[D][B]||r(19)(M[D],B,M[D].valueOf),c(M,"Symbol"),c(Math,"Math",!0),c(n.JSON,"JSON",!0)},function(t,e,r){r(59)("asyncIterator")},function(t,e,r){r(59)("observable")},function(t,e,r){r(197);for(var n=r(11),i=r(19),o=r(50),a=r(20)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;5>u;u++){var l=s[u],f=n[l],c=f&&f.prototype;c&&!c[a]&&i(c,a,l),o[l]=o.Array}},function(t,e){t.exports="precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n"},function(t,e){t.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n"},function(t,e){t.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nprecision mediump float;\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec3 scale, float seed) {\n  return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e){t.exports="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nprecision mediump float;\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec3 scale, float seed) {\n  return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    float radius = smoothstep(\n      0.0, 1.0,\n      (abs(\n        distance(v_texCoord * u_texSize, u_position)\n      ) - u_radius) / (u_gradientRadius * 2.0)\n    ) * u_blurRadius;\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\nuniform float u_saturation;\nuniform float u_contrast;\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec4 color = texColor;\n\n  // Apply brightness\n  color.rgb = (color.rgb + u_brightness);\n\n  // Apply saturation\n  float luminance = dot(color.rgb, luminanceWeighting);\n  vec3 greyScaleColor = vec3(luminance);\n  color.rgb = mix(greyScaleColor, color.rgb, u_saturation);\n\n  // Apply contrast\n  color.rgb = (color.rgb - 0.5) * u_contrast + 0.5;\n\n  // Apply alpha\n  color = vec4(color.rgb * texColor.a, texColor.a);\n\n  gl_FragColor = color;\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_frameImage;\nuniform vec4 u_color;\nuniform float u_thickness;\nuniform vec2 u_textureSize;\n\nvoid main() {\n  vec4 fragColor = texture2D(u_image, v_texCoord);\n  float scaledThicknessX = u_thickness / u_textureSize.x;\n  float scaledThicknessY = u_thickness / u_textureSize.y;\n  if (v_texCoord.x < scaledThicknessX ||\n    v_texCoord.x > 1.0 - scaledThicknessX ||\n    v_texCoord.y < scaledThicknessY || v_texCoord.y > 1.0 - scaledThicknessY) {\n      fragColor = mix(fragColor, u_color, u_color.a);\n    }\n\n  gl_FragColor = fragColor;\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"},function(t,e){t.exports="precision mediump float;\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"}])});